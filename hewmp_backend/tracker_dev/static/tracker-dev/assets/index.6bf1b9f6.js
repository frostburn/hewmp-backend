const ni=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}};ni();function Gn(n,e){const t=Object.create(null),s=n.split(",");for(let r=0;r<s.length;r++)t[s[r]]=!0;return e?r=>!!t[r.toLowerCase()]:r=>!!t[r]}const si="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ri=Gn(si);function qs(n){return!!n||n===""}function Vn(n){if(R(n)){const e={};for(let t=0;t<n.length;t++){const s=n[t],r=X(s)?ai(s):Vn(s);if(r)for(const i in r)e[i]=r[i]}return e}else{if(X(n))return n;if(Q(n))return n}}const ii=/;(?![^(]*\))/g,oi=/:(.+)/;function ai(n){const e={};return n.split(ii).forEach(t=>{if(t){const s=t.split(oi);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function ne(n){let e="";if(X(n))e=n;else if(R(n))for(let t=0;t<n.length;t++){const s=ne(n[t]);s&&(e+=s+" ")}else if(Q(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const vn=n=>X(n)?n:n==null?"":R(n)||Q(n)&&(n.toString===Xs||!D(n.toString))?JSON.stringify(n,Ys,2):String(n),Ys=(n,e)=>e&&e.__v_isRef?Ys(n,e.value):ft(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[s,r])=>(t[`${s} =>`]=r,t),{})}:Ws(e)?{[`Set(${e.size})`]:[...e.values()]}:Q(e)&&!R(e)&&!Qs(e)?String(e):e,K={},ut=[],Ie=()=>{},li=()=>!1,ci=/^on[^a-z]/,Jt=n=>ci.test(n),Kn=n=>n.startsWith("onUpdate:"),re=Object.assign,jn=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},ui=Object.prototype.hasOwnProperty,L=(n,e)=>ui.call(n,e),R=Array.isArray,ft=n=>Xt(n)==="[object Map]",Ws=n=>Xt(n)==="[object Set]",D=n=>typeof n=="function",X=n=>typeof n=="string",zn=n=>typeof n=="symbol",Q=n=>n!==null&&typeof n=="object",Js=n=>Q(n)&&D(n.then)&&D(n.catch),Xs=Object.prototype.toString,Xt=n=>Xs.call(n),fi=n=>Xt(n).slice(8,-1),Qs=n=>Xt(n)==="[object Object]",$n=n=>X(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Ht=Gn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Qt=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},hi=/-(\w)/g,Oe=Qt(n=>n.replace(hi,(e,t)=>t?t.toUpperCase():"")),di=/\B([A-Z])/g,mt=Qt(n=>n.replace(di,"-$1").toLowerCase()),Zt=Qt(n=>n.charAt(0).toUpperCase()+n.slice(1)),un=Qt(n=>n?`on${Zt(n)}`:""),Mt=(n,e)=>!Object.is(n,e),fn=(n,e)=>{for(let t=0;t<n.length;t++)n[t](e)},Gt=(n,e,t)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value:t})},pi=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let ms;const mi=()=>ms||(ms=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let xe;class Zs{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&xe&&(this.parent=xe,this.index=(xe.scopes||(xe.scopes=[])).push(this)-1)}run(e){if(this.active)try{return xe=this,e()}finally{xe=this.parent}}on(){xe=this}off(){xe=this.parent}stop(e){if(this.active){let t,s;for(t=0,s=this.effects.length;t<s;t++)this.effects[t].stop();for(t=0,s=this.cleanups.length;t<s;t++)this.cleanups[t]();if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].stop(!0);if(this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.active=!1}}}function gi(n){return new Zs(n)}function _i(n,e=xe){e&&e.active&&e.effects.push(n)}const qn=n=>{const e=new Set(n);return e.w=0,e.n=0,e},er=n=>(n.w&ze)>0,tr=n=>(n.n&ze)>0,Ei=({deps:n})=>{if(n.length)for(let e=0;e<n.length;e++)n[e].w|=ze},yi=n=>{const{deps:e}=n;if(e.length){let t=0;for(let s=0;s<e.length;s++){const r=e[s];er(r)&&!tr(r)?r.delete(n):e[t++]=r,r.w&=~ze,r.n&=~ze}e.length=t}},Nn=new WeakMap;let bt=0,ze=1;const wn=30;let Te;const Ze=Symbol(""),In=Symbol("");class Yn{constructor(e,t=null,s){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,_i(this,s)}run(){if(!this.active)return this.fn();let e=Te,t=Ke;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Te,Te=this,Ke=!0,ze=1<<++bt,bt<=wn?Ei(this):gs(this),this.fn()}finally{bt<=wn&&yi(this),ze=1<<--bt,Te=this.parent,Ke=t,this.parent=void 0}}stop(){this.active&&(gs(this),this.onStop&&this.onStop(),this.active=!1)}}function gs(n){const{deps:e}=n;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(n);e.length=0}}let Ke=!0;const nr=[];function gt(){nr.push(Ke),Ke=!1}function _t(){const n=nr.pop();Ke=n===void 0?!0:n}function he(n,e,t){if(Ke&&Te){let s=Nn.get(n);s||Nn.set(n,s=new Map);let r=s.get(t);r||s.set(t,r=qn()),sr(r)}}function sr(n,e){let t=!1;bt<=wn?tr(n)||(n.n|=ze,t=!er(n)):t=!n.has(Te),t&&(n.add(Te),Te.deps.push(n))}function Pe(n,e,t,s,r,i){const o=Nn.get(n);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&R(n))o.forEach((c,h)=>{(h==="length"||h>=s)&&a.push(c)});else switch(t!==void 0&&a.push(o.get(t)),e){case"add":R(n)?$n(t)&&a.push(o.get("length")):(a.push(o.get(Ze)),ft(n)&&a.push(o.get(In)));break;case"delete":R(n)||(a.push(o.get(Ze)),ft(n)&&a.push(o.get(In)));break;case"set":ft(n)&&a.push(o.get(Ze));break}if(a.length===1)a[0]&&Mn(a[0]);else{const c=[];for(const h of a)h&&c.push(...h);Mn(qn(c))}}function Mn(n,e){for(const t of R(n)?n:[...n])(t!==Te||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const bi=Gn("__proto__,__v_isRef,__isVue"),rr=new Set(Object.getOwnPropertyNames(Symbol).map(n=>Symbol[n]).filter(zn)),vi=Wn(),Ni=Wn(!1,!0),wi=Wn(!0),_s=Ii();function Ii(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const s=P(this);for(let i=0,o=this.length;i<o;i++)he(s,"get",i+"");const r=s[e](...t);return r===-1||r===!1?s[e](...t.map(P)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){gt();const s=P(this)[e].apply(this,t);return _t(),s}}),n}function Wn(n=!1,e=!1){return function(s,r,i){if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&i===(n?e?Ui:cr:e?lr:ar).get(s))return s;const o=R(s);if(!n&&o&&L(_s,r))return Reflect.get(_s,r,i);const a=Reflect.get(s,r,i);return(zn(r)?rr.has(r):bi(r))||(n||he(s,"get",r),e)?a:te(a)?!o||!$n(r)?a.value:a:Q(a)?n?ur(a):Qn(a):a}}const Mi=ir(),Si=ir(!0);function ir(n=!1){return function(t,s,r,i){let o=t[s];if(St(o)&&te(o)&&!te(r))return!1;if(!n&&!St(r)&&(fr(r)||(r=P(r),o=P(o)),!R(t)&&te(o)&&!te(r)))return o.value=r,!0;const a=R(t)&&$n(s)?Number(s)<t.length:L(t,s),c=Reflect.set(t,s,r,i);return t===P(i)&&(a?Mt(r,o)&&Pe(t,"set",s,r):Pe(t,"add",s,r)),c}}function Ai(n,e){const t=L(n,e);n[e];const s=Reflect.deleteProperty(n,e);return s&&t&&Pe(n,"delete",e,void 0),s}function Ci(n,e){const t=Reflect.has(n,e);return(!zn(e)||!rr.has(e))&&he(n,"has",e),t}function Ti(n){return he(n,"iterate",R(n)?"length":Ze),Reflect.ownKeys(n)}const or={get:vi,set:Mi,deleteProperty:Ai,has:Ci,ownKeys:Ti},Oi={get:wi,set(n,e){return!0},deleteProperty(n,e){return!0}},Ri=re({},or,{get:Ni,set:Si}),Jn=n=>n,en=n=>Reflect.getPrototypeOf(n);function Dt(n,e,t=!1,s=!1){n=n.__v_raw;const r=P(n),i=P(e);e!==i&&!t&&he(r,"get",e),!t&&he(r,"get",i);const{has:o}=en(r),a=s?Jn:t?ts:At;if(o.call(r,e))return a(n.get(e));if(o.call(r,i))return a(n.get(i));n!==r&&n.get(e)}function xt(n,e=!1){const t=this.__v_raw,s=P(t),r=P(n);return n!==r&&!e&&he(s,"has",n),!e&&he(s,"has",r),n===r?t.has(n):t.has(n)||t.has(r)}function Bt(n,e=!1){return n=n.__v_raw,!e&&he(P(n),"iterate",Ze),Reflect.get(n,"size",n)}function Es(n){n=P(n);const e=P(this);return en(e).has.call(e,n)||(e.add(n),Pe(e,"add",n,n)),this}function ys(n,e){e=P(e);const t=P(this),{has:s,get:r}=en(t);let i=s.call(t,n);i||(n=P(n),i=s.call(t,n));const o=r.call(t,n);return t.set(n,e),i?Mt(e,o)&&Pe(t,"set",n,e):Pe(t,"add",n,e),this}function bs(n){const e=P(this),{has:t,get:s}=en(e);let r=t.call(e,n);r||(n=P(n),r=t.call(e,n)),s&&s.call(e,n);const i=e.delete(n);return r&&Pe(e,"delete",n,void 0),i}function vs(){const n=P(this),e=n.size!==0,t=n.clear();return e&&Pe(n,"clear",void 0,void 0),t}function Lt(n,e){return function(s,r){const i=this,o=i.__v_raw,a=P(o),c=e?Jn:n?ts:At;return!n&&he(a,"iterate",Ze),o.forEach((h,g)=>s.call(r,c(h),c(g),i))}}function Pt(n,e,t){return function(...s){const r=this.__v_raw,i=P(r),o=ft(i),a=n==="entries"||n===Symbol.iterator&&o,c=n==="keys"&&o,h=r[n](...s),g=t?Jn:e?ts:At;return!e&&he(i,"iterate",c?In:Ze),{next(){const{value:I,done:M}=h.next();return M?{value:I,done:M}:{value:a?[g(I[0]),g(I[1])]:g(I),done:M}},[Symbol.iterator](){return this}}}}function Ue(n){return function(...e){return n==="delete"?!1:this}}function Di(){const n={get(i){return Dt(this,i)},get size(){return Bt(this)},has:xt,add:Es,set:ys,delete:bs,clear:vs,forEach:Lt(!1,!1)},e={get(i){return Dt(this,i,!1,!0)},get size(){return Bt(this)},has:xt,add:Es,set:ys,delete:bs,clear:vs,forEach:Lt(!1,!0)},t={get(i){return Dt(this,i,!0)},get size(){return Bt(this,!0)},has(i){return xt.call(this,i,!0)},add:Ue("add"),set:Ue("set"),delete:Ue("delete"),clear:Ue("clear"),forEach:Lt(!0,!1)},s={get(i){return Dt(this,i,!0,!0)},get size(){return Bt(this,!0)},has(i){return xt.call(this,i,!0)},add:Ue("add"),set:Ue("set"),delete:Ue("delete"),clear:Ue("clear"),forEach:Lt(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Pt(i,!1,!1),t[i]=Pt(i,!0,!1),e[i]=Pt(i,!1,!0),s[i]=Pt(i,!0,!0)}),[n,t,e,s]}const[xi,Bi,Li,Pi]=Di();function Xn(n,e){const t=e?n?Pi:Li:n?Bi:xi;return(s,r,i)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?s:Reflect.get(L(t,r)&&r in s?t:s,r,i)}const Fi={get:Xn(!1,!1)},ki={get:Xn(!1,!0)},Hi={get:Xn(!0,!1)},ar=new WeakMap,lr=new WeakMap,cr=new WeakMap,Ui=new WeakMap;function Gi(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Vi(n){return n.__v_skip||!Object.isExtensible(n)?0:Gi(fi(n))}function Qn(n){return St(n)?n:Zn(n,!1,or,Fi,ar)}function Ki(n){return Zn(n,!1,Ri,ki,lr)}function ur(n){return Zn(n,!0,Oi,Hi,cr)}function Zn(n,e,t,s,r){if(!Q(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const i=r.get(n);if(i)return i;const o=Vi(n);if(o===0)return n;const a=new Proxy(n,o===2?s:t);return r.set(n,a),a}function ht(n){return St(n)?ht(n.__v_raw):!!(n&&n.__v_isReactive)}function St(n){return!!(n&&n.__v_isReadonly)}function fr(n){return!!(n&&n.__v_isShallow)}function hr(n){return ht(n)||St(n)}function P(n){const e=n&&n.__v_raw;return e?P(e):n}function es(n){return Gt(n,"__v_skip",!0),n}const At=n=>Q(n)?Qn(n):n,ts=n=>Q(n)?ur(n):n;function dr(n){Ke&&Te&&(n=P(n),sr(n.dep||(n.dep=qn())))}function pr(n,e){n=P(n),n.dep&&Mn(n.dep)}function te(n){return!!(n&&n.__v_isRef===!0)}function ji(n){return zi(n,!1)}function zi(n,e){return te(n)?n:new $i(n,e)}class $i{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:P(e),this._value=t?e:At(e)}get value(){return dr(this),this._value}set value(e){e=this.__v_isShallow?e:P(e),Mt(e,this._rawValue)&&(this._rawValue=e,this._value=this.__v_isShallow?e:At(e),pr(this))}}function qi(n){return te(n)?n.value:n}const Yi={get:(n,e,t)=>qi(Reflect.get(n,e,t)),set:(n,e,t,s)=>{const r=n[e];return te(r)&&!te(t)?(r.value=t,!0):Reflect.set(n,e,t,s)}};function mr(n){return ht(n)?n:new Proxy(n,Yi)}class Wi{constructor(e,t,s,r){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new Yn(e,()=>{this._dirty||(this._dirty=!0,pr(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=s}get value(){const e=P(this);return dr(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Ji(n,e,t=!1){let s,r;const i=D(n);return i?(s=n,r=Ie):(s=n.get,r=n.set),new Wi(s,r,i||!r,t)}Promise.resolve();function je(n,e,t,s){let r;try{r=s?n(...s):n()}catch(i){tn(i,e,t)}return r}function me(n,e,t,s){if(D(n)){const i=je(n,e,t,s);return i&&Js(i)&&i.catch(o=>{tn(o,e,t)}),i}const r=[];for(let i=0;i<n.length;i++)r.push(me(n[i],e,t,s));return r}function tn(n,e,t,s=!0){const r=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=t;for(;i;){const h=i.ec;if(h){for(let g=0;g<h.length;g++)if(h[g](n,o,a)===!1)return}i=i.parent}const c=e.appContext.config.errorHandler;if(c){je(c,null,10,[n,o,a]);return}}Xi(n,t,r,s)}function Xi(n,e,t,s=!0){console.error(n)}let Vt=!1,Sn=!1;const fe=[];let Be=0;const Nt=[];let vt=null,ot=0;const wt=[];let Ge=null,at=0;const gr=Promise.resolve();let ns=null,An=null;function Qi(n){const e=ns||gr;return n?e.then(this?n.bind(this):n):e}function Zi(n){let e=Be+1,t=fe.length;for(;e<t;){const s=e+t>>>1;Ct(fe[s])<n?e=s+1:t=s}return e}function _r(n){(!fe.length||!fe.includes(n,Vt&&n.allowRecurse?Be+1:Be))&&n!==An&&(n.id==null?fe.push(n):fe.splice(Zi(n.id),0,n),Er())}function Er(){!Vt&&!Sn&&(Sn=!0,ns=gr.then(vr))}function eo(n){const e=fe.indexOf(n);e>Be&&fe.splice(e,1)}function yr(n,e,t,s){R(n)?t.push(...n):(!e||!e.includes(n,n.allowRecurse?s+1:s))&&t.push(n),Er()}function to(n){yr(n,vt,Nt,ot)}function no(n){yr(n,Ge,wt,at)}function ss(n,e=null){if(Nt.length){for(An=e,vt=[...new Set(Nt)],Nt.length=0,ot=0;ot<vt.length;ot++)vt[ot]();vt=null,ot=0,An=null,ss(n,e)}}function br(n){if(wt.length){const e=[...new Set(wt)];if(wt.length=0,Ge){Ge.push(...e);return}for(Ge=e,Ge.sort((t,s)=>Ct(t)-Ct(s)),at=0;at<Ge.length;at++)Ge[at]();Ge=null,at=0}}const Ct=n=>n.id==null?1/0:n.id;function vr(n){Sn=!1,Vt=!0,ss(n),fe.sort((t,s)=>Ct(t)-Ct(s));const e=Ie;try{for(Be=0;Be<fe.length;Be++){const t=fe[Be];t&&t.active!==!1&&je(t,null,14)}}finally{Be=0,fe.length=0,br(),Vt=!1,ns=null,(fe.length||Nt.length||wt.length)&&vr(n)}}function so(n,e,...t){const s=n.vnode.props||K;let r=t;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in s){const g=`${o==="modelValue"?"model":o}Modifiers`,{number:I,trim:M}=s[g]||K;M?r=t.map(O=>O.trim()):I&&(r=t.map(pi))}let a,c=s[a=un(e)]||s[a=un(Oe(e))];!c&&i&&(c=s[a=un(mt(e))]),c&&me(c,n,6,r);const h=s[a+"Once"];if(h){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,me(h,n,6,r)}}function Nr(n,e,t=!1){const s=e.emitsCache,r=s.get(n);if(r!==void 0)return r;const i=n.emits;let o={},a=!1;if(!D(n)){const c=h=>{const g=Nr(h,e,!0);g&&(a=!0,re(o,g))};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!i&&!a?(s.set(n,null),null):(R(i)?i.forEach(c=>o[c]=null):re(o,i),s.set(n,o),o)}function rs(n,e){return!n||!Jt(e)?!1:(e=e.slice(2).replace(/Once$/,""),L(n,e[0].toLowerCase()+e.slice(1))||L(n,mt(e))||L(n,e))}let Ne=null,wr=null;function Kt(n){const e=Ne;return Ne=n,wr=n&&n.type.__scopeId||null,e}function ro(n,e=Ne,t){if(!e||n._n)return n;const s=(...r)=>{s._d&&Ds(-1);const i=Kt(e),o=n(...r);return Kt(i),s._d&&Ds(1),o};return s._n=!0,s._c=!0,s._d=!0,s}function hn(n){const{type:e,vnode:t,proxy:s,withProxy:r,props:i,propsOptions:[o],slots:a,attrs:c,emit:h,render:g,renderCache:I,data:M,setupState:O,ctx:H,inheritAttrs:U}=n;let x,F;const de=Kt(n);try{if(t.shapeFlag&4){const Y=r||s;x=Ce(g.call(Y,Y,I,i,O,M,H)),F=c}else{const Y=e;x=Ce(Y.length>1?Y(i,{attrs:c,slots:a,emit:h}):Y(i,null)),F=e.props?c:io(c)}}catch(Y){It.length=0,tn(Y,n,1),x=Me($e)}let Z=x;if(F&&U!==!1){const Y=Object.keys(F),{shapeFlag:le}=Z;Y.length&&le&7&&(o&&Y.some(Kn)&&(F=oo(F,o)),Z=dt(Z,F))}return t.dirs&&(Z.dirs=Z.dirs?Z.dirs.concat(t.dirs):t.dirs),t.transition&&(Z.transition=t.transition),x=Z,Kt(de),x}const io=n=>{let e;for(const t in n)(t==="class"||t==="style"||Jt(t))&&((e||(e={}))[t]=n[t]);return e},oo=(n,e)=>{const t={};for(const s in n)(!Kn(s)||!(s.slice(9)in e))&&(t[s]=n[s]);return t};function ao(n,e,t){const{props:s,children:r,component:i}=n,{props:o,children:a,patchFlag:c}=e,h=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&c>=0){if(c&1024)return!0;if(c&16)return s?Ns(s,o,h):!!o;if(c&8){const g=e.dynamicProps;for(let I=0;I<g.length;I++){const M=g[I];if(o[M]!==s[M]&&!rs(h,M))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Ns(s,o,h):!0:!!o;return!1}function Ns(n,e,t){const s=Object.keys(e);if(s.length!==Object.keys(n).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==n[i]&&!rs(t,i))return!0}return!1}function lo({vnode:n,parent:e},t){for(;e&&e.subTree===n;)(n=e.vnode).el=t,e=e.parent}const co=n=>n.__isSuspense;function uo(n,e){e&&e.pendingBranch?R(n)?e.effects.push(...n):e.effects.push(n):no(n)}function fo(n,e){if(J){let t=J.provides;const s=J.parent&&J.parent.provides;s===t&&(t=J.provides=Object.create(s)),t[n]=e}}function dn(n,e,t=!1){const s=J||Ne;if(s){const r=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(r&&n in r)return r[n];if(arguments.length>1)return t&&D(e)?e.call(s.proxy):e}}const ws={};function pn(n,e,t){return Ir(n,e,t)}function Ir(n,e,{immediate:t,deep:s,flush:r,onTrack:i,onTrigger:o}=K){const a=J;let c,h=!1,g=!1;if(te(n)?(c=()=>n.value,h=fr(n)):ht(n)?(c=()=>n,s=!0):R(n)?(g=!0,h=n.some(ht),c=()=>n.map(F=>{if(te(F))return F.value;if(ht(F))return lt(F);if(D(F))return je(F,a,2)})):D(n)?e?c=()=>je(n,a,2):c=()=>{if(!(a&&a.isUnmounted))return I&&I(),me(n,a,3,[M])}:c=Ie,e&&s){const F=c;c=()=>lt(F())}let I,M=F=>{I=x.onStop=()=>{je(F,a,4)}};if(Tt)return M=Ie,e?t&&me(e,a,3,[c(),g?[]:void 0,M]):c(),Ie;let O=g?[]:ws;const H=()=>{if(!!x.active)if(e){const F=x.run();(s||h||(g?F.some((de,Z)=>Mt(de,O[Z])):Mt(F,O)))&&(I&&I(),me(e,a,3,[F,O===ws?void 0:O,M]),O=F)}else x.run()};H.allowRecurse=!!e;let U;r==="sync"?U=H:r==="post"?U=()=>ae(H,a&&a.suspense):U=()=>{!a||a.isMounted?to(H):H()};const x=new Yn(c,U);return e?t?H():O=x.run():r==="post"?ae(x.run.bind(x),a&&a.suspense):x.run(),()=>{x.stop(),a&&a.scope&&jn(a.scope.effects,x)}}function ho(n,e,t){const s=this.proxy,r=X(n)?n.includes(".")?Mr(s,n):()=>s[n]:n.bind(s,s);let i;D(e)?i=e:(i=e.handler,t=e);const o=J;pt(this);const a=Ir(r,i.bind(s),t);return o?pt(o):tt(),a}function Mr(n,e){const t=e.split(".");return()=>{let s=n;for(let r=0;r<t.length&&s;r++)s=s[t[r]];return s}}function lt(n,e){if(!Q(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),te(n))lt(n.value,e);else if(R(n))for(let t=0;t<n.length;t++)lt(n[t],e);else if(Ws(n)||ft(n))n.forEach(t=>{lt(t,e)});else if(Qs(n))for(const t in n)lt(n[t],e);return n}function po(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Tr(()=>{n.isMounted=!0}),Or(()=>{n.isUnmounting=!0}),n}const pe=[Function,Array],mo={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:pe,onEnter:pe,onAfterEnter:pe,onEnterCancelled:pe,onBeforeLeave:pe,onLeave:pe,onAfterLeave:pe,onLeaveCancelled:pe,onBeforeAppear:pe,onAppear:pe,onAfterAppear:pe,onAppearCancelled:pe},setup(n,{slots:e}){const t=ea(),s=po();let r;return()=>{const i=e.default&&Ar(e.default(),!0);if(!i||!i.length)return;const o=P(n),{mode:a}=o,c=i[0];if(s.isLeaving)return mn(c);const h=Is(c);if(!h)return mn(c);const g=Cn(h,o,s,t);Tn(h,g);const I=t.subTree,M=I&&Is(I);let O=!1;const{getTransitionKey:H}=h.type;if(H){const U=H();r===void 0?r=U:U!==r&&(r=U,O=!0)}if(M&&M.type!==$e&&(!Xe(h,M)||O)){const U=Cn(M,o,s,t);if(Tn(M,U),a==="out-in")return s.isLeaving=!0,U.afterLeave=()=>{s.isLeaving=!1,t.update()},mn(c);a==="in-out"&&h.type!==$e&&(U.delayLeave=(x,F,de)=>{const Z=Sr(s,M);Z[String(M.key)]=M,x._leaveCb=()=>{F(),x._leaveCb=void 0,delete g.delayedLeave},g.delayedLeave=de})}return c}}},go=mo;function Sr(n,e){const{leavingVNodes:t}=n;let s=t.get(e.type);return s||(s=Object.create(null),t.set(e.type,s)),s}function Cn(n,e,t,s){const{appear:r,mode:i,persisted:o=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:h,onEnterCancelled:g,onBeforeLeave:I,onLeave:M,onAfterLeave:O,onLeaveCancelled:H,onBeforeAppear:U,onAppear:x,onAfterAppear:F,onAppearCancelled:de}=e,Z=String(n.key),Y=Sr(t,n),le=(G,ee)=>{G&&me(G,s,9,ee)},qe={mode:i,persisted:o,beforeEnter(G){let ee=a;if(!t.isMounted)if(r)ee=U||a;else return;G._leaveCb&&G._leaveCb(!0);const W=Y[Z];W&&Xe(n,W)&&W.el._leaveCb&&W.el._leaveCb(),le(ee,[G])},enter(G){let ee=c,W=h,ge=g;if(!t.isMounted)if(r)ee=x||c,W=F||h,ge=de||g;else return;let ce=!1;const _e=G._enterCb=nt=>{ce||(ce=!0,nt?le(ge,[G]):le(W,[G]),qe.delayedLeave&&qe.delayedLeave(),G._enterCb=void 0)};ee?(ee(G,_e),ee.length<=1&&_e()):_e()},leave(G,ee){const W=String(n.key);if(G._enterCb&&G._enterCb(!0),t.isUnmounting)return ee();le(I,[G]);let ge=!1;const ce=G._leaveCb=_e=>{ge||(ge=!0,ee(),_e?le(H,[G]):le(O,[G]),G._leaveCb=void 0,Y[W]===n&&delete Y[W])};Y[W]=n,M?(M(G,ce),M.length<=1&&ce()):ce()},clone(G){return Cn(G,e,t,s)}};return qe}function mn(n){if(nn(n))return n=dt(n),n.children=null,n}function Is(n){return nn(n)?n.children?n.children[0]:void 0:n}function Tn(n,e){n.shapeFlag&6&&n.component?Tn(n.component.subTree,e):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function Ar(n,e=!1){let t=[],s=0;for(let r=0;r<n.length;r++){const i=n[r];i.type===se?(i.patchFlag&128&&s++,t=t.concat(Ar(i.children,e))):(e||i.type!==$e)&&t.push(i)}if(s>1)for(let r=0;r<t.length;r++)t[r].patchFlag=-2;return t}const On=n=>!!n.type.__asyncLoader,nn=n=>n.type.__isKeepAlive;function _o(n,e){Cr(n,"a",e)}function Eo(n,e){Cr(n,"da",e)}function Cr(n,e,t=J){const s=n.__wdc||(n.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(sn(e,s,t),t){let r=t.parent;for(;r&&r.parent;)nn(r.parent.vnode)&&yo(s,e,t,r),r=r.parent}}function yo(n,e,t,s){const r=sn(e,n,s,!0);Rr(()=>{jn(s[e],r)},t)}function sn(n,e,t=J,s=!1){if(t){const r=t[n]||(t[n]=[]),i=e.__weh||(e.__weh=(...o)=>{if(t.isUnmounted)return;gt(),pt(t);const a=me(e,t,n,o);return tt(),_t(),a});return s?r.unshift(i):r.push(i),i}}const ke=n=>(e,t=J)=>(!Tt||n==="sp")&&sn(n,e,t),bo=ke("bm"),Tr=ke("m"),vo=ke("bu"),No=ke("u"),Or=ke("bum"),Rr=ke("um"),wo=ke("sp"),Io=ke("rtg"),Mo=ke("rtc");function So(n,e=J){sn("ec",n,e)}let Rn=!0;function Ao(n){const e=xr(n),t=n.proxy,s=n.ctx;Rn=!1,e.beforeCreate&&Ms(e.beforeCreate,n,"bc");const{data:r,computed:i,methods:o,watch:a,provide:c,inject:h,created:g,beforeMount:I,mounted:M,beforeUpdate:O,updated:H,activated:U,deactivated:x,beforeDestroy:F,beforeUnmount:de,destroyed:Z,unmounted:Y,render:le,renderTracked:qe,renderTriggered:G,errorCaptured:ee,serverPrefetch:W,expose:ge,inheritAttrs:ce,components:_e,directives:nt,filters:cs}=e;if(h&&Co(h,s,null,n.appContext.config.unwrapInjectedRef),o)for(const q in o){const j=o[q];D(j)&&(s[q]=j.bind(t))}if(r){const q=r.call(t,t);Q(q)&&(n.data=Qn(q))}if(Rn=!0,i)for(const q in i){const j=i[q],Re=D(j)?j.bind(t,t):D(j.get)?j.get.bind(t,t):Ie,an=!D(j)&&D(j.set)?j.set.bind(t):Ie,Et=aa({get:Re,set:an});Object.defineProperty(s,q,{enumerable:!0,configurable:!0,get:()=>Et.value,set:st=>Et.value=st})}if(a)for(const q in a)Dr(a[q],s,t,q);if(c){const q=D(c)?c.call(t):c;Reflect.ownKeys(q).forEach(j=>{fo(j,q[j])})}g&&Ms(g,n,"c");function oe(q,j){R(j)?j.forEach(Re=>q(Re.bind(t))):j&&q(j.bind(t))}if(oe(bo,I),oe(Tr,M),oe(vo,O),oe(No,H),oe(_o,U),oe(Eo,x),oe(So,ee),oe(Mo,qe),oe(Io,G),oe(Or,de),oe(Rr,Y),oe(wo,W),R(ge))if(ge.length){const q=n.exposed||(n.exposed={});ge.forEach(j=>{Object.defineProperty(q,j,{get:()=>t[j],set:Re=>t[j]=Re})})}else n.exposed||(n.exposed={});le&&n.render===Ie&&(n.render=le),ce!=null&&(n.inheritAttrs=ce),_e&&(n.components=_e),nt&&(n.directives=nt)}function Co(n,e,t=Ie,s=!1){R(n)&&(n=Dn(n));for(const r in n){const i=n[r];let o;Q(i)?"default"in i?o=dn(i.from||r,i.default,!0):o=dn(i.from||r):o=dn(i),te(o)&&s?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[r]=o}}function Ms(n,e,t){me(R(n)?n.map(s=>s.bind(e.proxy)):n.bind(e.proxy),e,t)}function Dr(n,e,t,s){const r=s.includes(".")?Mr(t,s):()=>t[s];if(X(n)){const i=e[n];D(i)&&pn(r,i)}else if(D(n))pn(r,n.bind(t));else if(Q(n))if(R(n))n.forEach(i=>Dr(i,e,t,s));else{const i=D(n.handler)?n.handler.bind(t):e[n.handler];D(i)&&pn(r,i,n)}}function xr(n){const e=n.type,{mixins:t,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=n.appContext,a=i.get(e);let c;return a?c=a:!r.length&&!t&&!s?c=e:(c={},r.length&&r.forEach(h=>jt(c,h,o,!0)),jt(c,e,o)),i.set(e,c),c}function jt(n,e,t,s=!1){const{mixins:r,extends:i}=e;i&&jt(n,i,t,!0),r&&r.forEach(o=>jt(n,o,t,!0));for(const o in e)if(!(s&&o==="expose")){const a=To[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const To={data:Ss,props:Je,emits:Je,methods:Je,computed:Je,beforeCreate:ie,created:ie,beforeMount:ie,mounted:ie,beforeUpdate:ie,updated:ie,beforeDestroy:ie,beforeUnmount:ie,destroyed:ie,unmounted:ie,activated:ie,deactivated:ie,errorCaptured:ie,serverPrefetch:ie,components:Je,directives:Je,watch:Ro,provide:Ss,inject:Oo};function Ss(n,e){return e?n?function(){return re(D(n)?n.call(this,this):n,D(e)?e.call(this,this):e)}:e:n}function Oo(n,e){return Je(Dn(n),Dn(e))}function Dn(n){if(R(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function ie(n,e){return n?[...new Set([].concat(n,e))]:e}function Je(n,e){return n?re(re(Object.create(null),n),e):e}function Ro(n,e){if(!n)return e;if(!e)return n;const t=re(Object.create(null),n);for(const s in e)t[s]=ie(n[s],e[s]);return t}function Do(n,e,t,s=!1){const r={},i={};Gt(i,rn,1),n.propsDefaults=Object.create(null),Br(n,e,r,i);for(const o in n.propsOptions[0])o in r||(r[o]=void 0);t?n.props=s?r:Ki(r):n.type.props?n.props=r:n.props=i,n.attrs=i}function xo(n,e,t,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=n,a=P(r),[c]=n.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const g=n.vnode.dynamicProps;for(let I=0;I<g.length;I++){let M=g[I];const O=e[M];if(c)if(L(i,M))O!==i[M]&&(i[M]=O,h=!0);else{const H=Oe(M);r[H]=xn(c,a,H,O,n,!1)}else O!==i[M]&&(i[M]=O,h=!0)}}}else{Br(n,e,r,i)&&(h=!0);let g;for(const I in a)(!e||!L(e,I)&&((g=mt(I))===I||!L(e,g)))&&(c?t&&(t[I]!==void 0||t[g]!==void 0)&&(r[I]=xn(c,a,I,void 0,n,!0)):delete r[I]);if(i!==a)for(const I in i)(!e||!L(e,I)&&!0)&&(delete i[I],h=!0)}h&&Pe(n,"set","$attrs")}function Br(n,e,t,s){const[r,i]=n.propsOptions;let o=!1,a;if(e)for(let c in e){if(Ht(c))continue;const h=e[c];let g;r&&L(r,g=Oe(c))?!i||!i.includes(g)?t[g]=h:(a||(a={}))[g]=h:rs(n.emitsOptions,c)||(!(c in s)||h!==s[c])&&(s[c]=h,o=!0)}if(i){const c=P(t),h=a||K;for(let g=0;g<i.length;g++){const I=i[g];t[I]=xn(r,c,I,h[I],n,!L(h,I))}}return o}function xn(n,e,t,s,r,i){const o=n[t];if(o!=null){const a=L(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&D(c)){const{propsDefaults:h}=r;t in h?s=h[t]:(pt(r),s=h[t]=c.call(null,e),tt())}else s=c}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===mt(t))&&(s=!0))}return s}function Lr(n,e,t=!1){const s=e.propsCache,r=s.get(n);if(r)return r;const i=n.props,o={},a=[];let c=!1;if(!D(n)){const g=I=>{c=!0;const[M,O]=Lr(I,e,!0);re(o,M),O&&a.push(...O)};!t&&e.mixins.length&&e.mixins.forEach(g),n.extends&&g(n.extends),n.mixins&&n.mixins.forEach(g)}if(!i&&!c)return s.set(n,ut),ut;if(R(i))for(let g=0;g<i.length;g++){const I=Oe(i[g]);As(I)&&(o[I]=K)}else if(i)for(const g in i){const I=Oe(g);if(As(I)){const M=i[g],O=o[I]=R(M)||D(M)?{type:M}:M;if(O){const H=Os(Boolean,O.type),U=Os(String,O.type);O[0]=H>-1,O[1]=U<0||H<U,(H>-1||L(O,"default"))&&a.push(I)}}}const h=[o,a];return s.set(n,h),h}function As(n){return n[0]!=="$"}function Cs(n){const e=n&&n.toString().match(/^\s*function (\w+)/);return e?e[1]:n===null?"null":""}function Ts(n,e){return Cs(n)===Cs(e)}function Os(n,e){return R(e)?e.findIndex(t=>Ts(t,n)):D(e)&&Ts(e,n)?0:-1}const Pr=n=>n[0]==="_"||n==="$stable",is=n=>R(n)?n.map(Ce):[Ce(n)],Bo=(n,e,t)=>{const s=ro((...r)=>is(e(...r)),t);return s._c=!1,s},Fr=(n,e,t)=>{const s=n._ctx;for(const r in n){if(Pr(r))continue;const i=n[r];if(D(i))e[r]=Bo(r,i,s);else if(i!=null){const o=is(i);e[r]=()=>o}}},kr=(n,e)=>{const t=is(e);n.slots.default=()=>t},Lo=(n,e)=>{if(n.vnode.shapeFlag&32){const t=e._;t?(n.slots=P(e),Gt(e,"_",t)):Fr(e,n.slots={})}else n.slots={},e&&kr(n,e);Gt(n.slots,rn,1)},Po=(n,e,t)=>{const{vnode:s,slots:r}=n;let i=!0,o=K;if(s.shapeFlag&32){const a=e._;a?t&&a===1?i=!1:(re(r,e),!t&&a===1&&delete r._):(i=!e.$stable,Fr(e,r)),o=e}else e&&(kr(n,e),o={default:1});if(i)for(const a in r)!Pr(a)&&!(a in o)&&delete r[a]};function Ye(n,e,t,s){const r=n.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let c=a.dir[s];c&&(gt(),me(c,t,8,[n.el,a,n,e]),_t())}}function Hr(){return{app:null,config:{isNativeTag:li,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Fo=0;function ko(n,e){return function(s,r=null){r!=null&&!Q(r)&&(r=null);const i=Hr(),o=new Set;let a=!1;const c=i.app={_uid:Fo++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:la,get config(){return i.config},set config(h){},use(h,...g){return o.has(h)||(h&&D(h.install)?(o.add(h),h.install(c,...g)):D(h)&&(o.add(h),h(c,...g))),c},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),c},component(h,g){return g?(i.components[h]=g,c):i.components[h]},directive(h,g){return g?(i.directives[h]=g,c):i.directives[h]},mount(h,g,I){if(!a){const M=Me(s,r);return M.appContext=i,g&&e?e(M,h):n(M,h,I),a=!0,c._container=h,h.__vue_app__=c,ls(M.component)||M.component.proxy}},unmount(){a&&(n(null,c._container),delete c._container.__vue_app__)},provide(h,g){return i.provides[h]=g,c}};return c}}function Bn(n,e,t,s,r=!1){if(R(n)){n.forEach((M,O)=>Bn(M,e&&(R(e)?e[O]:e),t,s,r));return}if(On(s)&&!r)return;const i=s.shapeFlag&4?ls(s.component)||s.component.proxy:s.el,o=r?null:i,{i:a,r:c}=n,h=e&&e.r,g=a.refs===K?a.refs={}:a.refs,I=a.setupState;if(h!=null&&h!==c&&(X(h)?(g[h]=null,L(I,h)&&(I[h]=null)):te(h)&&(h.value=null)),D(c))je(c,a,12,[o,g]);else{const M=X(c),O=te(c);if(M||O){const H=()=>{if(n.f){const U=M?g[c]:c.value;r?R(U)&&jn(U,i):R(U)?U.includes(i)||U.push(i):M?g[c]=[i]:(c.value=[i],n.k&&(g[n.k]=c.value))}else M?(g[c]=o,L(I,c)&&(I[c]=o)):te(c)&&(c.value=o,n.k&&(g[n.k]=o))};o?(H.id=-1,ae(H,t)):H()}}}const ae=uo;function Ho(n){return Uo(n)}function Uo(n,e){const t=mi();t.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:c,setText:h,setElementText:g,parentNode:I,nextSibling:M,setScopeId:O=Ie,cloneNode:H,insertStaticContent:U}=n,x=(l,u,f,m=null,p=null,b=null,w=!1,y=null,N=!!u.dynamicChildren)=>{if(l===u)return;l&&!Xe(l,u)&&(m=Rt(l),He(l,p,b,!0),l=null),u.patchFlag===-2&&(N=!1,u.dynamicChildren=null);const{type:_,ref:A,shapeFlag:S}=u;switch(_){case os:F(l,u,f,m);break;case $e:de(l,u,f,m);break;case gn:l==null&&Z(u,f,m,w);break;case se:nt(l,u,f,m,p,b,w,y,N);break;default:S&1?qe(l,u,f,m,p,b,w,y,N):S&6?cs(l,u,f,m,p,b,w,y,N):(S&64||S&128)&&_.process(l,u,f,m,p,b,w,y,N,rt)}A!=null&&p&&Bn(A,l&&l.ref,b,u||l,!u)},F=(l,u,f,m)=>{if(l==null)s(u.el=a(u.children),f,m);else{const p=u.el=l.el;u.children!==l.children&&h(p,u.children)}},de=(l,u,f,m)=>{l==null?s(u.el=c(u.children||""),f,m):u.el=l.el},Z=(l,u,f,m)=>{[l.el,l.anchor]=U(l.children,u,f,m,l.el,l.anchor)},Y=({el:l,anchor:u},f,m)=>{let p;for(;l&&l!==u;)p=M(l),s(l,f,m),l=p;s(u,f,m)},le=({el:l,anchor:u})=>{let f;for(;l&&l!==u;)f=M(l),r(l),l=f;r(u)},qe=(l,u,f,m,p,b,w,y,N)=>{w=w||u.type==="svg",l==null?G(u,f,m,p,b,w,y,N):ge(l,u,p,b,w,y,N)},G=(l,u,f,m,p,b,w,y)=>{let N,_;const{type:A,props:S,shapeFlag:C,transition:T,patchFlag:B,dirs:$}=l;if(l.el&&H!==void 0&&B===-1)N=l.el=H(l.el);else{if(N=l.el=o(l.type,b,S&&S.is,S),C&8?g(N,l.children):C&16&&W(l.children,N,null,m,p,b&&A!=="foreignObject",w,y),$&&Ye(l,null,m,"created"),S){for(const z in S)z!=="value"&&!Ht(z)&&i(N,z,null,S[z],b,l.children,m,p,De);"value"in S&&i(N,"value",null,S.value),(_=S.onVnodeBeforeMount)&&Ae(_,m,l)}ee(N,l,l.scopeId,w,m)}$&&Ye(l,null,m,"beforeMount");const V=(!p||p&&!p.pendingBranch)&&T&&!T.persisted;V&&T.beforeEnter(N),s(N,u,f),((_=S&&S.onVnodeMounted)||V||$)&&ae(()=>{_&&Ae(_,m,l),V&&T.enter(N),$&&Ye(l,null,m,"mounted")},p)},ee=(l,u,f,m,p)=>{if(f&&O(l,f),m)for(let b=0;b<m.length;b++)O(l,m[b]);if(p){let b=p.subTree;if(u===b){const w=p.vnode;ee(l,w,w.scopeId,w.slotScopeIds,p.parent)}}},W=(l,u,f,m,p,b,w,y,N=0)=>{for(let _=N;_<l.length;_++){const A=l[_]=y?Ve(l[_]):Ce(l[_]);x(null,A,u,f,m,p,b,w,y)}},ge=(l,u,f,m,p,b,w)=>{const y=u.el=l.el;let{patchFlag:N,dynamicChildren:_,dirs:A}=u;N|=l.patchFlag&16;const S=l.props||K,C=u.props||K;let T;f&&We(f,!1),(T=C.onVnodeBeforeUpdate)&&Ae(T,f,u,l),A&&Ye(u,l,f,"beforeUpdate"),f&&We(f,!0);const B=p&&u.type!=="foreignObject";if(_?ce(l.dynamicChildren,_,y,f,m,B,b):w||Re(l,u,y,null,f,m,B,b,!1),N>0){if(N&16)_e(y,u,S,C,f,m,p);else if(N&2&&S.class!==C.class&&i(y,"class",null,C.class,p),N&4&&i(y,"style",S.style,C.style,p),N&8){const $=u.dynamicProps;for(let V=0;V<$.length;V++){const z=$[V],Ee=S[z],it=C[z];(it!==Ee||z==="value")&&i(y,z,Ee,it,p,l.children,f,m,De)}}N&1&&l.children!==u.children&&g(y,u.children)}else!w&&_==null&&_e(y,u,S,C,f,m,p);((T=C.onVnodeUpdated)||A)&&ae(()=>{T&&Ae(T,f,u,l),A&&Ye(u,l,f,"updated")},m)},ce=(l,u,f,m,p,b,w)=>{for(let y=0;y<u.length;y++){const N=l[y],_=u[y],A=N.el&&(N.type===se||!Xe(N,_)||N.shapeFlag&70)?I(N.el):f;x(N,_,A,null,m,p,b,w,!0)}},_e=(l,u,f,m,p,b,w)=>{if(f!==m){for(const y in m){if(Ht(y))continue;const N=m[y],_=f[y];N!==_&&y!=="value"&&i(l,y,_,N,w,u.children,p,b,De)}if(f!==K)for(const y in f)!Ht(y)&&!(y in m)&&i(l,y,f[y],null,w,u.children,p,b,De);"value"in m&&i(l,"value",f.value,m.value)}},nt=(l,u,f,m,p,b,w,y,N)=>{const _=u.el=l?l.el:a(""),A=u.anchor=l?l.anchor:a("");let{patchFlag:S,dynamicChildren:C,slotScopeIds:T}=u;T&&(y=y?y.concat(T):T),l==null?(s(_,f,m),s(A,f,m),W(u.children,f,A,p,b,w,y,N)):S>0&&S&64&&C&&l.dynamicChildren?(ce(l.dynamicChildren,C,f,p,b,w,y),(u.key!=null||p&&u===p.subTree)&&Ur(l,u,!0)):Re(l,u,f,A,p,b,w,y,N)},cs=(l,u,f,m,p,b,w,y,N)=>{u.slotScopeIds=y,l==null?u.shapeFlag&512?p.ctx.activate(u,f,m,w,N):on(u,f,m,p,b,w,N):oe(l,u,N)},on=(l,u,f,m,p,b,w)=>{const y=l.component=Zo(l,m,p);if(nn(l)&&(y.ctx.renderer=rt),ta(y),y.asyncDep){if(p&&p.registerDep(y,q),!l.el){const N=y.subTree=Me($e);de(null,N,u,f)}return}q(y,l,u,f,p,b,w)},oe=(l,u,f)=>{const m=u.component=l.component;if(ao(l,u,f))if(m.asyncDep&&!m.asyncResolved){j(m,u,f);return}else m.next=u,eo(m.update),m.update();else u.component=l.component,u.el=l.el,m.vnode=u},q=(l,u,f,m,p,b,w)=>{const y=()=>{if(l.isMounted){let{next:A,bu:S,u:C,parent:T,vnode:B}=l,$=A,V;We(l,!1),A?(A.el=B.el,j(l,A,w)):A=B,S&&fn(S),(V=A.props&&A.props.onVnodeBeforeUpdate)&&Ae(V,T,A,B),We(l,!0);const z=hn(l),Ee=l.subTree;l.subTree=z,x(Ee,z,I(Ee.el),Rt(Ee),l,p,b),A.el=z.el,$===null&&lo(l,z.el),C&&ae(C,p),(V=A.props&&A.props.onVnodeUpdated)&&ae(()=>Ae(V,T,A,B),p)}else{let A;const{el:S,props:C}=u,{bm:T,m:B,parent:$}=l,V=On(u);if(We(l,!1),T&&fn(T),!V&&(A=C&&C.onVnodeBeforeMount)&&Ae(A,$,u),We(l,!0),S&&cn){const z=()=>{l.subTree=hn(l),cn(S,l.subTree,l,p,null)};V?u.type.__asyncLoader().then(()=>!l.isUnmounted&&z()):z()}else{const z=l.subTree=hn(l);x(null,z,f,m,l,p,b),u.el=z.el}if(B&&ae(B,p),!V&&(A=C&&C.onVnodeMounted)){const z=u;ae(()=>Ae(A,$,z),p)}u.shapeFlag&256&&l.a&&ae(l.a,p),l.isMounted=!0,u=f=m=null}},N=l.effect=new Yn(y,()=>_r(l.update),l.scope),_=l.update=N.run.bind(N);_.id=l.uid,We(l,!0),_()},j=(l,u,f)=>{u.component=l;const m=l.vnode.props;l.vnode=u,l.next=null,xo(l,u.props,m,f),Po(l,u.children,f),gt(),ss(void 0,l.update),_t()},Re=(l,u,f,m,p,b,w,y,N=!1)=>{const _=l&&l.children,A=l?l.shapeFlag:0,S=u.children,{patchFlag:C,shapeFlag:T}=u;if(C>0){if(C&128){Et(_,S,f,m,p,b,w,y,N);return}else if(C&256){an(_,S,f,m,p,b,w,y,N);return}}T&8?(A&16&&De(_,p,b),S!==_&&g(f,S)):A&16?T&16?Et(_,S,f,m,p,b,w,y,N):De(_,p,b,!0):(A&8&&g(f,""),T&16&&W(S,f,m,p,b,w,y,N))},an=(l,u,f,m,p,b,w,y,N)=>{l=l||ut,u=u||ut;const _=l.length,A=u.length,S=Math.min(_,A);let C;for(C=0;C<S;C++){const T=u[C]=N?Ve(u[C]):Ce(u[C]);x(l[C],T,f,null,p,b,w,y,N)}_>A?De(l,p,b,!0,!1,S):W(u,f,m,p,b,w,y,N,S)},Et=(l,u,f,m,p,b,w,y,N)=>{let _=0;const A=u.length;let S=l.length-1,C=A-1;for(;_<=S&&_<=C;){const T=l[_],B=u[_]=N?Ve(u[_]):Ce(u[_]);if(Xe(T,B))x(T,B,f,null,p,b,w,y,N);else break;_++}for(;_<=S&&_<=C;){const T=l[S],B=u[C]=N?Ve(u[C]):Ce(u[C]);if(Xe(T,B))x(T,B,f,null,p,b,w,y,N);else break;S--,C--}if(_>S){if(_<=C){const T=C+1,B=T<A?u[T].el:m;for(;_<=C;)x(null,u[_]=N?Ve(u[_]):Ce(u[_]),f,B,p,b,w,y,N),_++}}else if(_>C)for(;_<=S;)He(l[_],p,b,!0),_++;else{const T=_,B=_,$=new Map;for(_=B;_<=C;_++){const ue=u[_]=N?Ve(u[_]):Ce(u[_]);ue.key!=null&&$.set(ue.key,_)}let V,z=0;const Ee=C-B+1;let it=!1,hs=0;const yt=new Array(Ee);for(_=0;_<Ee;_++)yt[_]=0;for(_=T;_<=S;_++){const ue=l[_];if(z>=Ee){He(ue,p,b,!0);continue}let Se;if(ue.key!=null)Se=$.get(ue.key);else for(V=B;V<=C;V++)if(yt[V-B]===0&&Xe(ue,u[V])){Se=V;break}Se===void 0?He(ue,p,b,!0):(yt[Se-B]=_+1,Se>=hs?hs=Se:it=!0,x(ue,u[Se],f,null,p,b,w,y,N),z++)}const ds=it?Go(yt):ut;for(V=ds.length-1,_=Ee-1;_>=0;_--){const ue=B+_,Se=u[ue],ps=ue+1<A?u[ue+1].el:m;yt[_]===0?x(null,Se,f,ps,p,b,w,y,N):it&&(V<0||_!==ds[V]?st(Se,f,ps,2):V--)}}},st=(l,u,f,m,p=null)=>{const{el:b,type:w,transition:y,children:N,shapeFlag:_}=l;if(_&6){st(l.component.subTree,u,f,m);return}if(_&128){l.suspense.move(u,f,m);return}if(_&64){w.move(l,u,f,rt);return}if(w===se){s(b,u,f);for(let S=0;S<N.length;S++)st(N[S],u,f,m);s(l.anchor,u,f);return}if(w===gn){Y(l,u,f);return}if(m!==2&&_&1&&y)if(m===0)y.beforeEnter(b),s(b,u,f),ae(()=>y.enter(b),p);else{const{leave:S,delayLeave:C,afterLeave:T}=y,B=()=>s(b,u,f),$=()=>{S(b,()=>{B(),T&&T()})};C?C(b,B,$):$()}else s(b,u,f)},He=(l,u,f,m=!1,p=!1)=>{const{type:b,props:w,ref:y,children:N,dynamicChildren:_,shapeFlag:A,patchFlag:S,dirs:C}=l;if(y!=null&&Bn(y,null,f,l,!0),A&256){u.ctx.deactivate(l);return}const T=A&1&&C,B=!On(l);let $;if(B&&($=w&&w.onVnodeBeforeUnmount)&&Ae($,u,l),A&6)ti(l.component,f,m);else{if(A&128){l.suspense.unmount(f,m);return}T&&Ye(l,null,u,"beforeUnmount"),A&64?l.type.remove(l,u,f,p,rt,m):_&&(b!==se||S>0&&S&64)?De(_,u,f,!1,!0):(b===se&&S&384||!p&&A&16)&&De(N,u,f),m&&us(l)}(B&&($=w&&w.onVnodeUnmounted)||T)&&ae(()=>{$&&Ae($,u,l),T&&Ye(l,null,u,"unmounted")},f)},us=l=>{const{type:u,el:f,anchor:m,transition:p}=l;if(u===se){ei(f,m);return}if(u===gn){le(l);return}const b=()=>{r(f),p&&!p.persisted&&p.afterLeave&&p.afterLeave()};if(l.shapeFlag&1&&p&&!p.persisted){const{leave:w,delayLeave:y}=p,N=()=>w(f,b);y?y(l.el,b,N):N()}else b()},ei=(l,u)=>{let f;for(;l!==u;)f=M(l),r(l),l=f;r(u)},ti=(l,u,f)=>{const{bum:m,scope:p,update:b,subTree:w,um:y}=l;m&&fn(m),p.stop(),b&&(b.active=!1,He(w,l,u,f)),y&&ae(y,u),ae(()=>{l.isUnmounted=!0},u),u&&u.pendingBranch&&!u.isUnmounted&&l.asyncDep&&!l.asyncResolved&&l.suspenseId===u.pendingId&&(u.deps--,u.deps===0&&u.resolve())},De=(l,u,f,m=!1,p=!1,b=0)=>{for(let w=b;w<l.length;w++)He(l[w],u,f,m,p)},Rt=l=>l.shapeFlag&6?Rt(l.component.subTree):l.shapeFlag&128?l.suspense.next():M(l.anchor||l.el),fs=(l,u,f)=>{l==null?u._vnode&&He(u._vnode,null,null,!0):x(u._vnode||null,l,u,null,null,null,f),br(),u._vnode=l},rt={p:x,um:He,m:st,r:us,mt:on,mc:W,pc:Re,pbc:ce,n:Rt,o:n};let ln,cn;return e&&([ln,cn]=e(rt)),{render:fs,hydrate:ln,createApp:ko(fs,ln)}}function We({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function Ur(n,e,t=!1){const s=n.children,r=e.children;if(R(s)&&R(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Ve(r[i]),a.el=o.el),t||Ur(o,a))}}function Go(n){const e=n.slice(),t=[0];let s,r,i,o,a;const c=n.length;for(s=0;s<c;s++){const h=n[s];if(h!==0){if(r=t[t.length-1],n[r]<h){e[s]=r,t.push(s);continue}for(i=0,o=t.length-1;i<o;)a=i+o>>1,n[t[a]]<h?i=a+1:o=a;h<n[t[i]]&&(i>0&&(e[s]=t[i-1]),t[i]=s)}}for(i=t.length,o=t[i-1];i-- >0;)t[i]=o,o=e[o];return t}const Vo=n=>n.__isTeleport,Gr="components";function zt(n,e){return jo(Gr,n,!0,e)||n}const Ko=Symbol();function jo(n,e,t=!0,s=!1){const r=Ne||J;if(r){const i=r.type;if(n===Gr){const a=ia(i);if(a&&(a===e||a===Oe(e)||a===Zt(Oe(e))))return i}const o=Rs(r[n]||i[n],e)||Rs(r.appContext[n],e);return!o&&s?i:o}}function Rs(n,e){return n&&(n[e]||n[Oe(e)]||n[Zt(Oe(e))])}const se=Symbol(void 0),os=Symbol(void 0),$e=Symbol(void 0),gn=Symbol(void 0),It=[];let et=null;function ve(n=!1){It.push(et=n?null:[])}function zo(){It.pop(),et=It[It.length-1]||null}let $t=1;function Ds(n){$t+=n}function Vr(n){return n.dynamicChildren=$t>0?et||ut:null,zo(),$t>0&&et&&et.push(n),n}function Le(n,e,t,s,r,i){return Vr(k(n,e,t,s,r,i,!0))}function Kr(n,e,t,s,r){return Vr(Me(n,e,t,s,r,!0))}function $o(n){return n?n.__v_isVNode===!0:!1}function Xe(n,e){return n.type===e.type&&n.key===e.key}const rn="__vInternal",jr=({key:n})=>n!=null?n:null,Ut=({ref:n,ref_key:e,ref_for:t})=>n!=null?X(n)||te(n)||D(n)?{i:Ne,r:n,k:e,f:!!t}:n:null;function k(n,e=null,t=null,s=0,r=null,i=n===se?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&jr(e),ref:e&&Ut(e),scopeId:wr,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null};return a?(as(c,t),i&128&&n.normalize(c)):t&&(c.shapeFlag|=X(t)?8:16),$t>0&&!o&&et&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&et.push(c),c}const Me=qo;function qo(n,e=null,t=null,s=0,r=null,i=!1){if((!n||n===Ko)&&(n=$e),$o(n)){const a=dt(n,e,!0);return t&&as(a,t),a}if(oa(n)&&(n=n.__vccOpts),e){e=Yo(e);let{class:a,style:c}=e;a&&!X(a)&&(e.class=ne(a)),Q(c)&&(hr(c)&&!R(c)&&(c=re({},c)),e.style=Vn(c))}const o=X(n)?1:co(n)?128:Vo(n)?64:Q(n)?4:D(n)?2:0;return k(n,e,t,s,r,o,i,!0)}function Yo(n){return n?hr(n)||rn in n?re({},n):n:null}function dt(n,e,t=!1){const{props:s,ref:r,patchFlag:i,children:o}=n,a=e?zr(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:a,key:a&&jr(a),ref:e&&e.ref?t&&r?R(r)?r.concat(Ut(e)):[r,Ut(e)]:Ut(e):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:o,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==se?i===-1?16:i|16:i,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&dt(n.ssContent),ssFallback:n.ssFallback&&dt(n.ssFallback),el:n.el,anchor:n.anchor}}function Wo(n=" ",e=0){return Me(os,null,n,e)}function Ce(n){return n==null||typeof n=="boolean"?Me($e):R(n)?Me(se,null,n.slice()):typeof n=="object"?Ve(n):Me(os,null,String(n))}function Ve(n){return n.el===null||n.memo?n:dt(n)}function as(n,e){let t=0;const{shapeFlag:s}=n;if(e==null)e=null;else if(R(e))t=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),as(n,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!(rn in e)?e._ctx=Ne:r===3&&Ne&&(Ne.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else D(e)?(e={default:e,_ctx:Ne},t=32):(e=String(e),s&64?(t=16,e=[Wo(e)]):t=8);n.children=e,n.shapeFlag|=t}function zr(...n){const e={};for(let t=0;t<n.length;t++){const s=n[t];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=ne([e.class,s.class]));else if(r==="style")e.style=Vn([e.style,s.style]);else if(Jt(r)){const i=e[r],o=s[r];o&&i!==o&&!(R(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Ae(n,e,t,s=null){me(n,e,7,[t,s])}function Ln(n,e,t,s){let r;const i=t&&t[s];if(R(n)||X(n)){r=new Array(n.length);for(let o=0,a=n.length;o<a;o++)r[o]=e(n[o],o,void 0,i&&i[o])}else if(typeof n=="number"){r=new Array(n);for(let o=0;o<n;o++)r[o]=e(o+1,o,void 0,i&&i[o])}else if(Q(n))if(n[Symbol.iterator])r=Array.from(n,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(n);r=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const h=o[a];r[a]=e(n[h],h,a,i&&i[a])}}else r=[];return t&&(t[s]=r),r}const Pn=n=>n?$r(n)?ls(n)||n.proxy:Pn(n.parent):null,qt=re(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Pn(n.parent),$root:n=>Pn(n.root),$emit:n=>n.emit,$options:n=>xr(n),$forceUpdate:n=>()=>_r(n.update),$nextTick:n=>Qi.bind(n.proxy),$watch:n=>ho.bind(n)}),Jo={get({_:n},e){const{ctx:t,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:c}=n;let h;if(e[0]!=="$"){const O=o[e];if(O!==void 0)switch(O){case 1:return s[e];case 2:return r[e];case 4:return t[e];case 3:return i[e]}else{if(s!==K&&L(s,e))return o[e]=1,s[e];if(r!==K&&L(r,e))return o[e]=2,r[e];if((h=n.propsOptions[0])&&L(h,e))return o[e]=3,i[e];if(t!==K&&L(t,e))return o[e]=4,t[e];Rn&&(o[e]=0)}}const g=qt[e];let I,M;if(g)return e==="$attrs"&&he(n,"get",e),g(n);if((I=a.__cssModules)&&(I=I[e]))return I;if(t!==K&&L(t,e))return o[e]=4,t[e];if(M=c.config.globalProperties,L(M,e))return M[e]},set({_:n},e,t){const{data:s,setupState:r,ctx:i}=n;return r!==K&&L(r,e)?(r[e]=t,!0):s!==K&&L(s,e)?(s[e]=t,!0):L(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(i[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!t[o]||n!==K&&L(n,o)||e!==K&&L(e,o)||(a=i[0])&&L(a,o)||L(s,o)||L(qt,o)||L(r.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?this.set(n,e,t.get(),null):t.value!=null&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}},Xo=Hr();let Qo=0;function Zo(n,e,t){const s=n.type,r=(e?e.appContext:n.appContext)||Xo,i={uid:Qo++,vnode:n,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new Zs(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Lr(s,r),emitsOptions:Nr(s,r),emit:null,emitted:null,propsDefaults:K,inheritAttrs:s.inheritAttrs,ctx:K,data:K,props:K,attrs:K,slots:K,refs:K,setupState:K,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=so.bind(null,i),n.ce&&n.ce(i),i}let J=null;const ea=()=>J||Ne,pt=n=>{J=n,n.scope.on()},tt=()=>{J&&J.scope.off(),J=null};function $r(n){return n.vnode.shapeFlag&4}let Tt=!1;function ta(n,e=!1){Tt=e;const{props:t,children:s}=n.vnode,r=$r(n);Do(n,t,r,e),Lo(n,s);const i=r?na(n,e):void 0;return Tt=!1,i}function na(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=es(new Proxy(n.ctx,Jo));const{setup:s}=t;if(s){const r=n.setupContext=s.length>1?ra(n):null;pt(n),gt();const i=je(s,n,0,[n.props,r]);if(_t(),tt(),Js(i)){if(i.then(tt,tt),e)return i.then(o=>{xs(n,o,e)}).catch(o=>{tn(o,n,0)});n.asyncDep=i}else xs(n,i,e)}else qr(n,e)}function xs(n,e,t){D(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Q(e)&&(n.setupState=mr(e)),qr(n,t)}let Bs;function qr(n,e,t){const s=n.type;if(!n.render){if(!e&&Bs&&!s.render){const r=s.template;if(r){const{isCustomElement:i,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:c}=s,h=re(re({isCustomElement:i,delimiters:a},o),c);s.render=Bs(r,h)}}n.render=s.render||Ie}pt(n),gt(),Ao(n),_t(),tt()}function sa(n){return new Proxy(n.attrs,{get(e,t){return he(n,"get","$attrs"),e[t]}})}function ra(n){const e=s=>{n.exposed=s||{}};let t;return{get attrs(){return t||(t=sa(n))},slots:n.slots,emit:n.emit,expose:e}}function ls(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(mr(es(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in qt)return qt[t](n)}}))}function ia(n){return D(n)&&n.displayName||n.name}function oa(n){return D(n)&&"__vccOpts"in n}const aa=(n,e)=>Ji(n,e,Tt),la="3.2.31",ca="http://www.w3.org/2000/svg",Qe=typeof document!="undefined"?document:null,Ls=Qe&&Qe.createElement("template"),ua={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,s)=>{const r=e?Qe.createElementNS(ca,n):Qe.createElement(n,t?{is:t}:void 0);return n==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:n=>Qe.createTextNode(n),createComment:n=>Qe.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Qe.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},cloneNode(n){const e=n.cloneNode(!0);return"_value"in n&&(e._value=n._value),e},insertStaticContent(n,e,t,s,r,i){const o=t?t.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===i||!(r=r.nextSibling)););else{Ls.innerHTML=s?`<svg>${n}</svg>`:n;const a=Ls.content;if(s){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function fa(n,e,t){const s=n._vtc;s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}function ha(n,e,t){const s=n.style,r=X(t);if(t&&!r){for(const i in t)Fn(s,i,t[i]);if(e&&!X(e))for(const i in e)t[i]==null&&Fn(s,i,"")}else{const i=s.display;r?e!==t&&(s.cssText=t):e&&n.removeAttribute("style"),"_vod"in n&&(s.display=i)}}const Ps=/\s*!important$/;function Fn(n,e,t){if(R(t))t.forEach(s=>Fn(n,e,s));else if(e.startsWith("--"))n.setProperty(e,t);else{const s=da(n,e);Ps.test(t)?n.setProperty(mt(s),t.replace(Ps,""),"important"):n[s]=t}}const Fs=["Webkit","Moz","ms"],_n={};function da(n,e){const t=_n[e];if(t)return t;let s=Oe(e);if(s!=="filter"&&s in n)return _n[e]=s;s=Zt(s);for(let r=0;r<Fs.length;r++){const i=Fs[r]+s;if(i in n)return _n[e]=i}return e}const ks="http://www.w3.org/1999/xlink";function pa(n,e,t,s,r){if(s&&e.startsWith("xlink:"))t==null?n.removeAttributeNS(ks,e.slice(6,e.length)):n.setAttributeNS(ks,e,t);else{const i=ri(e);t==null||i&&!qs(t)?n.removeAttribute(e):n.setAttribute(e,i?"":t)}}function ma(n,e,t,s,r,i,o){if(e==="innerHTML"||e==="textContent"){s&&o(s,r,i),n[e]=t==null?"":t;return}if(e==="value"&&n.tagName!=="PROGRESS"&&!n.tagName.includes("-")){n._value=t;const a=t==null?"":t;(n.value!==a||n.tagName==="OPTION")&&(n.value=a),t==null&&n.removeAttribute(e);return}if(t===""||t==null){const a=typeof n[e];if(a==="boolean"){n[e]=qs(t);return}else if(t==null&&a==="string"){n[e]="",n.removeAttribute(e);return}else if(a==="number"){try{n[e]=0}catch{}n.removeAttribute(e);return}}try{n[e]=t}catch{}}let Yt=Date.now,Yr=!1;if(typeof window!="undefined"){Yt()>document.createEvent("Event").timeStamp&&(Yt=()=>performance.now());const n=navigator.userAgent.match(/firefox\/(\d+)/i);Yr=!!(n&&Number(n[1])<=53)}let kn=0;const ga=Promise.resolve(),_a=()=>{kn=0},Ea=()=>kn||(ga.then(_a),kn=Yt());function ya(n,e,t,s){n.addEventListener(e,t,s)}function ba(n,e,t,s){n.removeEventListener(e,t,s)}function va(n,e,t,s,r=null){const i=n._vei||(n._vei={}),o=i[e];if(s&&o)o.value=s;else{const[a,c]=Na(e);if(s){const h=i[e]=wa(s,r);ya(n,a,h,c)}else o&&(ba(n,a,o,c),i[e]=void 0)}}const Hs=/(?:Once|Passive|Capture)$/;function Na(n){let e;if(Hs.test(n)){e={};let t;for(;t=n.match(Hs);)n=n.slice(0,n.length-t[0].length),e[t[0].toLowerCase()]=!0}return[mt(n.slice(2)),e]}function wa(n,e){const t=s=>{const r=s.timeStamp||Yt();(Yr||r>=t.attached-1)&&me(Ia(s,t.value),e,5,[s])};return t.value=n,t.attached=Ea(),t}function Ia(n,e){if(R(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const Us=/^on[a-z]/,Ma=(n,e,t,s,r=!1,i,o,a,c)=>{e==="class"?fa(n,s,r):e==="style"?ha(n,t,s):Jt(e)?Kn(e)||va(n,e,t,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Sa(n,e,s,r))?ma(n,e,s,i,o,a,c):(e==="true-value"?n._trueValue=s:e==="false-value"&&(n._falseValue=s),pa(n,e,s,r))};function Sa(n,e,t,s){return s?!!(e==="innerHTML"||e==="textContent"||e in n&&Us.test(e)&&D(t)):e==="spellcheck"||e==="draggable"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA"||Us.test(e)&&X(t)?!1:e in n}const Aa={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};go.props;const Ca=re({patchProp:Ma},ua);let Gs;function Ta(){return Gs||(Gs=Ho(Ca))}const Oa=(...n)=>{const e=Ta().createApp(...n),{mount:t}=e;return e.mount=s=>{const r=Ra(s);if(!r)return;const i=e._component;!D(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.innerHTML="";const o=t(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function Ra(n){return X(n)?document.querySelector(n):n}var Da=!1;/*!
  * pinia v2.0.13
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const xa=Symbol();var Vs;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Vs||(Vs={}));function Ba(){const n=gi(!0),e=n.run(()=>ji({}));let t=[],s=[];const r=es({install(i){r._a=i,i.provide(xa,r),i.config.globalProperties.$pinia=r,s.forEach(o=>t.push(o)),s=[]},use(i){return!this._a&&!Da?s.push(i):t.push(i),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return r}class we{constructor(e=!1){this.eventMap={},this.eventsSuspended=e==1}addListener(e,t,s={}){if(typeof e=="string"&&e.length<1||e instanceof String&&e.length<1||typeof e!="string"&&!(e instanceof String)&&e!==we.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof t!="function")throw new TypeError("The callback must be a function.");const r=new Ks(e,this,t,s);return this.eventMap[e]||(this.eventMap[e]=[]),s.prepend?this.eventMap[e].unshift(r):this.eventMap[e].push(r),r}addOneTimeListener(e,t,s={}){s.remaining=1,this.addListener(e,t,s)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(e,t){return e===void 0?!!(this.eventMap[we.ANY_EVENT]&&this.eventMap[we.ANY_EVENT].length>0)||Object.entries(this.eventMap).some(([,s])=>s.length>0):this.eventMap[e]&&this.eventMap[e].length>0?t instanceof Ks?this.eventMap[e].filter(s=>s===t).length>0:typeof t=="function"?this.eventMap[e].filter(s=>s.callback===t).length>0:t==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(e){return this.eventMap[e]||[]}suspendEvent(e){this.getListeners(e).forEach(t=>{t.suspended=!0})}unsuspendEvent(e){this.getListeners(e).forEach(t=>{t.suspended=!1})}getListenerCount(e){return this.getListeners(e).length}emit(e,...t){if(typeof e!="string"&&!(e instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let s=[],r=this.eventMap[we.ANY_EVENT]||[];return this.eventMap[e]&&(r=r.concat(this.eventMap[e])),r.forEach(i=>{if(i.suspended)return;let o=[...t];Array.isArray(i.arguments)&&(o=o.concat(i.arguments)),i.remaining>0&&(s.push(i.callback.apply(i.context,o)),i.count++),--i.remaining<1&&i.remove()}),s}removeListener(e,t,s={}){if(e===void 0)return void(this.eventMap={});if(!this.eventMap[e])return;let r=this.eventMap[e].filter(i=>t&&i.callback!==t||s.remaining&&s.remaining!==i.remaining||s.context&&s.context!==i.context);r.length?this.eventMap[e]=r:delete this.eventMap[e]}async waitFor(e,t={}){return t.duration=parseInt(t.duration),(isNaN(t.duration)||t.duration<=0)&&(t.duration=1/0),new Promise((s,r)=>{let i,o=this.addListener(e,()=>{clearTimeout(i),s()},{remaining:1});t.duration!==1/0&&(i=setTimeout(()=>{o.remove(),r("The duration expired before the event was emitted.")},t.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class Ks{constructor(e,t,s,r={}){if(typeof e!="string"&&!(e instanceof String)&&e!==we.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!t)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof s!="function")throw new TypeError("The 'callback' must be a function.");r.arguments===void 0||Array.isArray(r.arguments)||(r.arguments=[r.arguments]),(r=Object.assign({context:t,remaining:1/0,arguments:void 0,duration:1/0},r)).duration!==1/0&&setTimeout(()=>this.remove(),r.duration),this.arguments=r.arguments,this.callback=s,this.context=r.context,this.count=0,this.event=e,this.remaining=parseInt(r.remaining)>=1?parseInt(r.remaining):1/0,this.suspended=!1,this.target=t}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All properties are static and should be referenced using the class name. For example:
 * `Enumerations.MIDI_CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class d{static get MIDI_CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get MIDI_CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CONTROL_CHANGE_MESSAGES(){return{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class ct{constructor(e,t={}){this.duration=v.defaults.note.duration,this.attack=v.defaults.note.attack,this.release=v.defaults.note.release,t.duration!=null&&(this.duration=t.duration),t.attack!=null&&(this.attack=t.attack),t.rawAttack!=null&&(this.attack=E.from7bitToFloat(t.rawAttack)),t.release!=null&&(this.release=t.release),t.rawRelease!=null&&(this.release=E.from7bitToFloat(t.rawRelease)),Number.isInteger(e)?this.identifier=E.toNoteIdentifier(e):this.identifier=e}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(e){const t=E.getNoteDetails(e);if(v.validation&&!e)throw new Error("Invalid note identifier");this._name=t.name,this._accidental=t.accidental,this._octave=t.octave}get name(){return this._name}set name(e){if(v.validation&&(e=e.toUpperCase(),!["C","D","E","F","G","A","B"].includes(e)))throw new Error("Invalid name value");this._name=e}get accidental(){return this._accidental}set accidental(e){if(v.validation&&(e=e.toLowerCase(),!["#","##","b","bb"].includes(e)))throw new Error("Invalid accidental value");this._accidental=e}get octave(){return this._octave}set octave(e){if(v.validation&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid octave value");this._octave=e}get duration(){return this._duration}set duration(e){if(v.validation&&(e=parseFloat(e),isNaN(e)||e===null||e<0))throw new RangeError("Invalid duration value.");this._duration=e}get attack(){return this._attack}set attack(e){if(v.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid attack value.");this._attack=e}get release(){return this._release}set release(e){if(v.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid release value.");this._release=e}get rawAttack(){return E.fromFloatTo7Bit(this._attack)}set rawAttack(e){this._attack=E.from7bitToFloat(e)}get rawRelease(){return E.fromFloatTo7Bit(this._release)}set rawRelease(e){this._release=E.from7bitToFloat(e)}get number(){return E.toNoteNumber(this.identifier)}getOffsetNumber(e=0,t=0){return v.validation&&(e=parseInt(e)||0,t=parseInt(t)||0),Math.min(Math.max(this.number+12*e+t,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class E{static toNoteNumber(e,t=0){if(t=t==null?0:parseInt(t),isNaN(t))throw new RangeError("Invalid 'octaveOffset' value");typeof e!="string"&&(e="");const s=this.getNoteDetails(e);if(!s)throw new TypeError("Invalid note identifier");let r=12*(s.octave+1+t);if(r+={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[s.name],s.accidental&&(s.accidental.startsWith("b")?r-=s.accidental.length:r+=s.accidental.length),r<0||r>127)throw new RangeError("Invalid octaveOffset value");return r}static getNoteDetails(e){Number.isInteger(e)&&(e=this.toNoteIdentifier(e));const t=e.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!t)throw new TypeError("Invalid note identifier");const s=t[1].toUpperCase(),r=parseInt(t[3]);let i=t[2].toLowerCase();return i=i===""?void 0:i,{accidental:i,identifier:s+(i||"")+r,name:s,octave:r}}static sanitizeChannels(e){let t;if(this.validation){if(e==="all")t=["all"];else if(e==="none")return[]}return t=Array.isArray(e)?e:[e],t.indexOf("all")>-1&&(t=d.MIDI_CHANNEL_NUMBERS),t.map(function(s){return parseInt(s)}).filter(function(s){return s>=1&&s<=16})}static toTimestamp(e){let t=!1;const s=parseFloat(e);return!isNaN(s)&&(typeof e=="string"&&e.substring(0,1)==="+"?s>=0&&(t=v.time+s):s>=0&&(t=s),t)}static guessNoteNumber(e,t){t=parseInt(t)||0;let s=!1;if(Number.isInteger(e)&&e>=0&&e<=127)s=parseInt(e);else if(parseInt(e)>=0&&parseInt(e)<=127)s=parseInt(e);else if(typeof e=="string"||e instanceof String)try{s=this.toNoteNumber(e.trim(),t)}catch{return!1}return s}static toNoteIdentifier(e,t){if(e=parseInt(e),isNaN(e)||e<0||e>127)throw new RangeError("Invalid note number");if(t=t==null?0:parseInt(t),isNaN(t))throw new RangeError("Invalid octaveOffset value");const s=Math.floor(e/12-1)+t;return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][e%12]+s.toString()}static buildNote(e,t={}){if(t.octaveOffset=parseInt(t.octaveOffset)||0,e instanceof ct)return e;let s=this.guessNoteNumber(e,t.octaveOffset);if(s===!1)throw new TypeError(`The input could not be parsed as a note (${e})`);return t.octaveOffset=void 0,new ct(s,t)}static buildNoteArray(e,t={}){let s=[];return Array.isArray(e)||(e=[e]),e.forEach(r=>{s.push(this.buildNote(r,t))}),s}static from7bitToFloat(e){return e===1/0&&(e=127),e=parseInt(e)||0,Math.min(Math.max(e/127,0),1)}static fromFloatTo7Bit(e){return e===1/0&&(e=1),e=parseFloat(e)||0,Math.min(Math.max(Math.round(127*e),0),127)}static fromMsbLsbToFloat(e,t=0){v.validation&&(e=Math.min(Math.max(parseInt(e)||0,0),127),t=Math.min(Math.max(parseInt(t)||0,0),127));const s=((e<<7)+t)/16383;return Math.min(Math.max(s,0),1)}static fromFloatToMsbLsb(e){v.validation&&(e=Math.min(Math.max(parseFloat(e)||0,0),1));const t=Math.round(16383*e);return{msb:t>>7,lsb:127&t}}static offsetNumber(e,t=0,s=0){if(v.validation){if(e=parseInt(e),isNaN(e))throw new Error("Invalid note number");t=parseInt(t)||0,s=parseInt(s)||0}return Math.min(Math.max(e+12*t+s,0),127)}static getPropertyByValue(e,t){return Object.keys(e).find(s=>e[s]===t)}static getCcNameByNumber(e){return E.getPropertyByValue(d.MIDI_CONTROL_CHANGE_MESSAGES,e)}static getChannelModeByNumber(e){if(!(e>=120&&e<=127))return!1;for(let t in d.MIDI_CHANNEL_MODE_MESSAGES)if(d.MIDI_CHANNEL_MODE_MESSAGES.hasOwnProperty(t)&&e===d.MIDI_CHANNEL_MODE_MESSAGES[t])return t;return!1}static get isNode(){return new Function("try { return this === global; } catch(e) { return false; }")()}static get isBrowser(){return new Function("try { return this === window; } catch(e) { return false; }")()}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class La extends we{constructor(e,t){super(),this._output=e,this._number=t,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(e,t={time:0}){return this.output.send(e,t),this}sendKeyAftertouch(e,t,s={}){if(v.validation){if(s.useRawValue&&(s.rawValue=s.useRawValue),isNaN(parseFloat(t)))throw new RangeError("Invalid key aftertouch value.");if(s.rawValue){if(!(t>=0&&t<=127&&Number.isInteger(t)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(t>=0&&t<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}s.rawValue||(t=E.fromFloatTo7Bit(t));const r=v.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(e)||(e=[e]),E.buildNoteArray(e).forEach(i=>{this.send([(d.MIDI_CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),i.getOffsetNumber(r),t],{time:E.toTimestamp(s.time)})}),this}sendControlChange(e,t,s={}){if(typeof e=="string"&&(e=d.MIDI_CONTROL_CHANGE_MESSAGES[e]),Array.isArray(t)||(t=[t]),v.validation){if(e===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if((t=t.map(r=>{const i=Math.min(Math.max(parseInt(r),0),127);if(isNaN(i))throw new TypeError("Values must be integers between 0 and 127");return i})).length===2&&e>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return t.forEach((r,i)=>{this.send([(d.MIDI_CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e+32*i,t[i]],{time:E.toTimestamp(s.time)})}),this}_selectNonRegisteredParameter(e,t={}){return this.sendControlChange(99,e[0],t),this.sendControlChange(98,e[1],t),this}_deselectRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_deselectNonRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_selectRegisteredParameter(e,t={}){return this.sendControlChange(101,e[0],t),this.sendControlChange(100,e[1],t),this}_setCurrentParameter(e,t={}){return e=[].concat(e),this.sendControlChange(6,e[0],t),e.length<2||this.sendControlChange(38,e[1],t),this}sendRpnDecrement(e,t={}){if(Array.isArray(e)||(e=d.MIDI_REGISTERED_PARAMETERS[e]),v.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let s=!1;if(Object.getOwnPropertyNames(d.MIDI_REGISTERED_PARAMETERS).forEach(r=>{d.MIDI_REGISTERED_PARAMETERS[r][0]===e[0]&&d.MIDI_REGISTERED_PARAMETERS[r][1]===e[1]&&(s=!0)}),!s)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,t),this.sendControlChange(97,0,t),this._deselectRegisteredParameter(t),this}sendRpnIncrement(e,t={}){if(Array.isArray(e)||(e=d.MIDI_REGISTERED_PARAMETERS[e]),v.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let s=!1;if(Object.getOwnPropertyNames(d.MIDI_REGISTERED_PARAMETERS).forEach(r=>{d.MIDI_REGISTERED_PARAMETERS[r][0]===e[0]&&d.MIDI_REGISTERED_PARAMETERS[r][1]===e[1]&&(s=!0)}),!s)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,t),this.sendControlChange(96,0,t),this._deselectRegisteredParameter(t),this}playNote(e,t={}){if(this.sendNoteOn(e,t),t.duration>0&&isFinite(String(t.duration).trim()||NaN)){let s={time:(E.toTimestamp(t.time)||v.time)+t.duration,release:t.release,rawRelease:t.rawRelease};this.sendNoteOff(e,s)}return this}sendNoteOff(e,t={}){if(v.validation){if(t.rawRelease!=null&&!(t.rawRelease>=0&&t.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(t.release!=null&&!(t.release>=0&&t.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");t.rawVelocity&&(t.rawRelease=t.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),t.velocity&&(t.release=t.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let s=64;t.rawRelease!=null?s=t.rawRelease:isNaN(t.release)||(s=Math.round(127*t.release));const r=v.octaveOffset+this.output.octaveOffset+this.octaveOffset;return E.buildNoteArray(e,{rawRelease:parseInt(s)}).forEach(i=>{this.send([(d.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),i.getOffsetNumber(r),i.rawRelease],{time:E.toTimestamp(t.time)})}),this}stopNote(e,t={}){return this.sendNoteOff(e,t)}sendNoteOn(e,t={}){if(v.validation){if(t.rawAttack!=null&&!(t.rawAttack>=0&&t.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(t.attack!=null&&!(t.attack>=0&&t.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");t.rawVelocity&&(t.rawAttack=t.velocity,t.rawRelease=t.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),t.velocity&&(t.attack=t.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let s=64;t.rawAttack!=null?s=t.rawAttack:isNaN(t.attack)||(s=Math.round(127*t.attack));const r=v.octaveOffset+this.output.octaveOffset+this.octaveOffset;return E.buildNoteArray(e,{rawAttack:s}).forEach(i=>{this.send([(d.MIDI_CHANNEL_MESSAGES.noteon<<4)+(this.number-1),i.getOffsetNumber(r),i.rawAttack],{time:E.toTimestamp(t.time)})}),this}sendChannelMode(e,t=0,s={}){if(typeof e=="string"&&(e=d.MIDI_CHANNEL_MODE_MESSAGES[e]),v.validation){if(e===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(e)||!(e>=120&&e<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(t))||t<0||t>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(d.MIDI_CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e,t],{time:E.toTimestamp(s.time)}),this}sendOmniMode(e,t={}){return e===void 0||e?this.sendChannelMode("omnimodeon",0,t):this.sendChannelMode("omnimodeoff",0,t),this}sendChannelAftertouch(e,t={}){if(v.validation){if(isNaN(parseFloat(e)))throw new RangeError("Invalid channel aftertouch value.");if(t.rawValue){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(e>=0&&e<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return this.send([(d.MIDI_CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(127*e)],{time:E.toTimestamp(t.time)}),this}sendMasterTuning(e,t={}){if(e=parseFloat(e)||0,v.validation&&!(e>-65&&e<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let s=Math.floor(e)+64,r=e-Math.floor(e);r=Math.round((r+1)/2*16383);let i=r>>7&127,o=127&r;return this.sendRpnValue("channelcoarsetuning",s,t),this.sendRpnValue("channelfinetuning",[i,o],t),this}sendModulationRange(e,t,s={}){if(v.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!(t==null||Number.isInteger(t)&&t>=0&&t<=127))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return t>=0&&t<=127||(t=0),this.sendRpnValue("modulationrange",[e,t],s),this}sendNrpnValue(e,t,s={}){if(t=[].concat(t),v.validation){if(!Array.isArray(e)||!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");t.forEach(r=>{if(!(r>=0&&r<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(e,s),this._setCurrentParameter(t,s),this._deselectNonRegisteredParameter(s),this}sendPitchBend(e,t={}){if(v.validation)if(t.rawValue&&Array.isArray(e)){if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(t.rawValue&&!Array.isArray(e)){if(!(e>=0&&e<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(e)||e===null)throw new RangeError("Invalid pitch bend value.");if(!(e>=-1&&e<=1))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}let s=0,r=0;if(t.rawValue&&Array.isArray(e))s=e[0],r=e[1];else if(t.rawValue&&!Array.isArray(e))s=e;else{const i=E.fromFloatToMsbLsb((e+1)/2);s=i.msb,r=i.lsb}return this.send([(d.MIDI_CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),r,s],{time:E.toTimestamp(t.time)}),this}sendPitchBendRange(e,t,s={}){if(v.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[e,t],s),this}sendProgramChange(e,t={}){if(e=parseInt(e)||0,v.validation&&!(e>=0&&e<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(d.MIDI_CHANNEL_MESSAGES.programchange<<4)+(this.number-1),e],{time:E.toTimestamp(t.time)}),this}sendRpnValue(e,t,s={}){if(Array.isArray(e)||(e=d.MIDI_REGISTERED_PARAMETERS[e]),v.validation){if(!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(t).forEach(r=>{if(!(r>=0&&r<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(e,s),this._setCurrentParameter(t,s),this._deselectRegisteredParameter(s),this}sendTuningBank(e,t={}){if(v.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",e,t),this}sendTuningProgram(e,t={}){if(v.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",e,t),this}sendLocalControl(e,t={}){return e?this.sendChannelMode("localcontrol",127,t):this.sendChannelMode("localcontrol",0,t)}sendAllNotesOff(e={}){return this.sendChannelMode("allnotesoff",0,e)}sendAllSoundOff(e={}){return this.sendChannelMode("allsoundoff",0,e)}sendResetAllControllers(e={}){return this.sendChannelMode("resetallcontrollers",0,e)}sendPolyphonicMode(e,t={}){return e==="mono"?this.sendChannelMode("monomodeon",0,t):this.sendChannelMode("polymodeon",0,t)}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class Hn extends we{constructor(e){super(),this._midiOutput=e,this._octaveOffset=0,this.channels=[];for(let t=1;t<=16;t++)this.channels[t]=new La(this,t);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._midiOutput.onstatechange=null,await this.close(),this._midiOutput=null}_onStateChange(e){let t={timestamp:v.time};e.port.connection==="open"?(t.type="opened",t.target=this,t.port=t.target,this.emit("opened",t)):e.port.connection==="closed"&&e.port.state==="connected"?(t.type="closed",t.target=this,t.port=t.target,this.emit("closed",t)):e.port.connection==="closed"&&e.port.state==="disconnected"?(t.type="disconnected",t.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",t)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught:",e.port.connection,e.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(e){return Promise.reject(e)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(e,t={time:0},s=0){if(e instanceof Wr&&(e=E.isNode?e.data:e.rawData),e instanceof Uint8Array&&E.isNode&&(e=Array.from(e)),v.validation){if(Array.isArray(e)||e instanceof Uint8Array||(e=[e],Array.isArray(t)&&(e=e.concat(t)),t=isNaN(s)?{time:0}:{time:s}),!(parseInt(e[0])>=128&&parseInt(e[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");e.slice(1).forEach(r=>{if(!((r=parseInt(r))>=0&&r<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),t||(t={time:0})}return this._midiOutput.send(e,E.toTimestamp(t.time)),this}sendSysex(e,t=[],s={}){if(e=[].concat(e),t instanceof Uint8Array){const r=new Uint8Array(1+e.length+t.length+1);r[0]=d.MIDI_SYSTEM_MESSAGES.sysex,r.set(Uint8Array.from(e),1),r.set(t,1+e.length),r[r.length-1]=d.MIDI_SYSTEM_MESSAGES.sysexend,this.send(r,{time:s.time})}else{const r=e.concat(t,d.MIDI_SYSTEM_MESSAGES.sysexend);this.send([d.MIDI_SYSTEM_MESSAGES.sysex].concat(r),{time:s.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():v.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(e,t={}){if(v.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([d.MIDI_SYSTEM_MESSAGES.timecode,e],{time:t.time}),this}sendSongPosition(e=0,t={}){var s=(e=Math.floor(e)||0)>>7&127,r=127&e;return this.send([d.MIDI_SYSTEM_MESSAGES.songposition,s,r],{time:t.time}),this}sendSongSelect(e=0,t={}){if(v.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([d.MIDI_SYSTEM_MESSAGES.songselect,e],{time:t.time}),this}sendTuneRequest(e={}){return this.send([d.MIDI_SYSTEM_MESSAGES.tunerequest],{time:e.time}),this}sendClock(e={}){return this.send([d.MIDI_SYSTEM_MESSAGES.clock],{time:e.time}),this}sendStart(e={}){return this.send([d.MIDI_SYSTEM_MESSAGES.start],{time:e.time}),this}sendContinue(e={}){return this.send([d.MIDI_SYSTEM_MESSAGES.continue],{time:e.time}),this}sendStop(e={}){return this.send([d.MIDI_SYSTEM_MESSAGES.stop],{time:e.time}),this}sendActiveSensing(e={}){return this.send([d.MIDI_SYSTEM_MESSAGES.activesensing],{time:e.time}),this}sendReset(e={}){return this.send([d.MIDI_SYSTEM_MESSAGES.reset],{time:e.time}),this}sendTuningRequest(e={}){return v.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(e)}sendKeyAftertouch(e,t,s={}){return s.channels==null&&(s.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendKeyAftertouch(e,t,s)}),this}sendControlChange(e,t,s={},r={}){if(v.validation&&(Array.isArray(s)||Number.isInteger(s)||s==="all")){const i=s;(s=r).channels=i,s.channels==="all"&&(s.channels=d.MIDI_CHANNEL_NUMBERS)}return s.channels==null&&(s.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(s.channels).forEach(i=>{this.channels[i].sendControlChange(e,t,s)}),this}sendPitchBendRange(e=0,t=0,s={}){return s.channels==null&&(s.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendPitchBendRange(e,t,s)}),this}setPitchBendRange(e=0,t=0,s="all",r={}){return v.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),r.channels=s,r.channels==="all"&&(r.channels=d.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(e,t,r)}sendRpnValue(e,t,s={}){return s.channels==null&&(s.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendRpnValue(e,t,s)}),this}setRegisteredParameter(e,t=[],s="all",r={}){return v.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),r.channels=s,r.channels==="all"&&(r.channels=d.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(e,t,r)}sendChannelAftertouch(e,t={},s={}){if(v.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=d.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendChannelAftertouch(e,t)}),this}sendPitchBend(e,t={},s={}){if(v.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=d.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendPitchBend(e,t)}),this}sendProgramChange(e=0,t={},s={}){if(v.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=d.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendProgramChange(e,t)}),this}sendModulationRange(e,t,s={}){return s.channels==null&&(s.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendModulationRange(e,t,s)}),this}setModulationRange(e=0,t=0,s="all",r={}){return v.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),r.channels=s,r.channels==="all"&&(r.channels=d.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(e,t,r)}sendMasterTuning(e,t={}){return t.channels==null&&(t.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendMasterTuning(e,t)}),this}setMasterTuning(e,t={},s={}){return v.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),s.channels=t,s.channels==="all"&&(s.channels=d.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(e,s)}sendTuningProgram(e,t={}){return t.channels==null&&(t.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendTuningProgram(e,t)}),this}setTuningProgram(e,t="all",s={}){return v.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),s.channels=t,s.channels==="all"&&(s.channels=d.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(e,s)}sendTuningBank(e=0,t={}){return t.channels==null&&(t.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendTuningBank(e,t)}),this}setTuningBank(e,t="all",s={}){return v.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),s.channels=t,s.channels==="all"&&(s.channels=d.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(e,s)}sendChannelMode(e,t=0,s={},r={}){if(v.validation&&(Array.isArray(s)||Number.isInteger(s)||s==="all")){const i=s;(s=r).channels=i,s.channels==="all"&&(s.channels=d.MIDI_CHANNEL_NUMBERS)}return s.channels==null&&(s.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(s.channels).forEach(i=>{this.channels[i].sendChannelMode(e,t,s)}),this}sendAllSoundOff(e={}){return e.channels==null&&(e.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(e.channels).forEach(t=>{this.channels[t].sendAllSoundOff(e)}),this}sendAllNotesOff(e={}){return e.channels==null&&(e.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(e.channels).forEach(t=>{this.channels[t].sendAllNotesOff(e)}),this}sendResetAllControllers(e={},t={}){if(v.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const s=e;(e=t).channels=s,e.channels==="all"&&(e.channels=d.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(e.channels).forEach(s=>{this.channels[s].sendResetAllControllers(e)}),this}sendPolyphonicMode(e,t={},s={}){if(v.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=d.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendPolyphonicMode(e,t)}),this}sendLocalControl(e,t={},s={}){if(v.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=d.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendLocalControl(e,t)}),this}sendOmniMode(e,t={},s={}){if(v.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=d.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendOmniMode(e,t)}),this}sendNrpnValue(e,t,s={}){return s.channels==null&&(s.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendNrpnValue(e,t,s)}),this}setNonRegisteredParameter(e,t=[],s="all",r={}){return v.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),r.channels=s,r.channels==="all"&&(r.channels=d.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(e,t,r)}sendRpnIncrement(e,t={}){return t.channels==null&&(t.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendRpnIncrement(e,t)}),this}incrementRegisteredParameter(e,t="all",s={}){return v.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),s.channels=t,s.channels==="all"&&(s.channels=d.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(e,s)}sendRpnDecrement(e,t={}){return t.channels==null&&(t.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(t.channels).forEach(s=>{this.channels[s].sendRpnDecrement(e,t)}),this}decrementRegisteredParameter(e,t="all",s={}){return v.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),s.channels=t,s.channels==="all"&&(s.channels=d.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(e,s)}sendNoteOff(e,t={},s={}){if(v.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=d.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendNoteOff(e,t)}),this}stopNote(e,t){return this.sendNoteOff(e,t)}playNote(e,t={},s={}){if(v.validation&&(t.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),t.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=d.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].playNote(e,t)}),this}sendNoteOn(e,t={},s={}){if(v.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;(t=s).channels=r,t.channels==="all"&&(t.channels=d.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendNoteOn(e,t)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class js{constructor(e=[],t={}){this.destinations=[],this.types=[...Object.keys(d.MIDI_SYSTEM_MESSAGES),...Object.keys(d.MIDI_CHANNEL_MESSAGES)],this.channels=d.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(e)||(e=[e]),t.types&&!Array.isArray(t.types)&&(t.types=[t.types]),t.channels&&!Array.isArray(t.channels)&&(t.channels=[t.channels]),v.validation&&(e.forEach(s=>{if(!(s instanceof Hn))throw new TypeError("Destinations must be of type 'Output'.")}),t.types!==void 0&&t.types.forEach(s=>{if(!d.MIDI_SYSTEM_MESSAGES.hasOwnProperty(s)&&!d.MIDI_CHANNEL_MESSAGES.hasOwnProperty(s))throw new TypeError("Type must be a valid message type.")}),t.channels!==void 0&&t.channels.forEach(s=>{if(!d.MIDI_CHANNEL_NUMBERS.includes(s))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=e,t.types&&(this.types=t.types),t.channels&&(this.channels=t.channels)}forward(e){this.suspended||this.types.includes(e.type)&&(e.channel&&!this.channels.includes(e.channel)||this.destinations.forEach(t=>{(!v.validation||t instanceof Hn)&&t.send(e)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 * @fires InputChannel#controlchange
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-databuttonincrement
 * @fires InputChannel#event:nrpn-databuttondecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-databuttonincrement
 * @fires InputChannel#event:rpn-databuttondecrement
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class Pa extends we{constructor(e,t){super(),this._input=e,this._number=t,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(e){const t=Object.assign({},e);t.port=this.input,t.target=this,t.type="midimessage",this.emit(t.type,t),this._parseEventForStandardMessages(t)}_parseEventForStandardMessages(e){const t=Object.assign({},e);t.type=t.message.type||"unknownmessage";const s=e.message.dataBytes[0],r=e.message.dataBytes[1];if(t.type==="noteoff"||t.type==="noteon"&&r===0)this.notesState[s]=!1,t.type="noteoff",t.note=new ct(E.offsetNumber(s,this.octaveOffset+this.input.octaveOffset+v.octaveOffset),{rawAttack:0,rawRelease:r}),t.value=E.from7bitToFloat(r),t.rawValue=r,t.velocity=t.note.release,t.rawVelocity=t.note.rawRelease;else if(t.type==="noteon")this.notesState[s]=!0,t.note=new ct(E.offsetNumber(s,this.octaveOffset+this.input.octaveOffset+v.octaveOffset),{rawAttack:r}),t.value=E.from7bitToFloat(r),t.rawValue=r,t.velocity=t.note.attack,t.rawVelocity=t.note.rawAttack;else if(t.type==="keyaftertouch")t.note=new ct(E.offsetNumber(s,this.octaveOffset+this.input.octaveOffset+v.octaveOffset)),t.value=E.from7bitToFloat(r),t.rawValue=r,t.identifier=t.note.identifier,t.key=t.note.number,t.rawKey=s;else if(t.type==="controlchange"){t.controller={number:s,name:E.getCcNameByNumber(s)},t.subtype=t.controller.name||"controller"+s,t.value=E.from7bitToFloat(r),t.rawValue=r;const i=Object.assign({},t);i.type=`${t.type}-controller${s}`,delete i.subtype,this.emit(i.type,i),t.message.dataBytes[0]>=120&&this._parseChannelModeMessage(t),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(t.message.dataBytes[0])&&this._parseEventForParameterNumber(t)}else t.type==="programchange"?(t.value=s,t.rawValue=t.value):t.type==="channelaftertouch"?(t.value=E.from7bitToFloat(s),t.rawValue=s):t.type==="pitchbend"?(t.value=((r<<7)+s-8192)/8192,t.rawValue=(r<<7)+s):t.type="unknownmessage";this.emit(t.type,t)}_parseChannelModeMessage(e){const t=Object.assign({},e);t.type=t.controller.name,t.type==="localcontrol"&&(t.value=t.message.data[2]===127,t.rawValue=t.message.data[2]),t.type==="omnimodeon"?(t.type="omnimode",t.value=!0,t.rawValue=t.message.data[2]):t.type==="omnimodeoff"&&(t.type="omnimode",t.value=!1,t.rawValue=t.message.data[2]),t.type==="monomodeon"?(t.type="monomode",t.value=!0,t.rawValue=t.message.data[2]):t.type==="polymodeon"&&(t.type="monomode",t.value=!1,t.rawValue=t.message.data[2]),this.emit(t.type,t)}_parseEventForParameterNumber(e){const t=e.message.dataBytes[0],s=e.message.dataBytes[1],r=d.MIDI_CONTROL_CHANGE_MESSAGES;t===r.nonregisteredparameterfine||t===r.registeredparameterfine?(this._nrpnBuffer=[],this._rpnBuffer=[],t===r.nonregisteredparameterfine?this._nrpnBuffer=[e.message]:s!==127&&(this._rpnBuffer=[e.message])):t===r.nonregisteredparametercoarse||t===r.registeredparametercoarse?t===r.nonregisteredparametercoarse?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(e.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&s!==127?this._rpnBuffer.push(e.message):this._rpnBuffer=[]):t!==r.dataentrycoarse&&t!==r.dataentryfine&&t!==r.databuttonincrement&&t!==r.databuttondecrement||(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],e):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],e):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(e){return e===d.MIDI_CONTROL_CHANGE_MESSAGES.dataentrycoarse||e===d.MIDI_CONTROL_CHANGE_MESSAGES.dataentryfine||e===d.MIDI_CONTROL_CHANGE_MESSAGES.databuttonincrement||e===d.MIDI_CONTROL_CHANGE_MESSAGES.databuttondecrement||e===d.MIDI_CONTROL_CHANGE_MESSAGES.nonregisteredparametercoarse||e===d.MIDI_CONTROL_CHANGE_MESSAGES.nonregisteredparameterfine||e===d.MIDI_CONTROL_CHANGE_MESSAGES.registeredparametercoarse||e===d.MIDI_CONTROL_CHANGE_MESSAGES.registeredparameterfine}_dispatchParameterNumberEvent(e,t,s,r){e=e==="nrpn"?"nrpn":"rpn";const i={target:r.target,timestamp:r.timestamp,message:r.message,parameterMsb:t,parameterLsb:s,value:E.from7bitToFloat(r.message.dataBytes[1]),rawValue:r.message.dataBytes[1]};i.parameter=e==="rpn"?Object.keys(d.MIDI_REGISTERED_PARAMETERS).find(a=>d.MIDI_REGISTERED_PARAMETERS[a][0]===t&&d.MIDI_REGISTERED_PARAMETERS[a][1]===s):(t<<7)+s;const o=E.getPropertyByValue(d.MIDI_CONTROL_CHANGE_MESSAGES,r.message.dataBytes[0]);i.type=`${e}-${o}`,this.emit(i.type,i),i.type=e,i.subtype=o,this.emit(i.type,i)}getChannelModeByNumber(e){return v.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),e=Math.floor(e)),E.getChannelModeByNumber(e)}getCcNameByNumber(e){if(v.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),!((e=parseInt(e))>=0&&e<=127)))throw new RangeError("Invalid control change number.");return E.getCcNameByNumber(e)}getNoteState(e){e instanceof ct&&(e=e.identifier);const t=E.guessNoteNumber(e,v.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[t]}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(e){this.validation&&(e=!!e),this.parameterNumberEventsEnabled=e}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Wr{constructor(e){this.rawData=e,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=1+(15&this.statusByte)):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=E.getPropertyByValue(d.MIDI_CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=E.getPropertyByValue(d.MIDI_SYSTEM_MESSAGES,this.command)),this.statusByte===d.MIDI_SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class Fa extends we{constructor(e){super(),this._midiInput=e,this._octaveOffset=0,this.channels=[];for(let t=1;t<=16;t++)this.channels[t]=new Pa(this,t);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(e){let t={timestamp:v.time,target:this,port:this};e.port.connection==="open"?(t.type="opened",this.emit("opened",t)):e.port.connection==="closed"&&e.port.state==="connected"?(t.type="closed",this.emit("closed",t)):e.port.connection==="closed"&&e.port.state==="disconnected"?(t.type="disconnected",t.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",t)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught: ",e.port.connection,e.port.state)}_onMidiMessage(e){const t=new Wr(e.data),s={port:this,target:this,message:t,timestamp:e.timeStamp,type:"midimessage",data:t.data,rawData:t.data,statusByte:t.data[0],dataBytes:t.dataBytes};this.emit("midimessage",s),t.isSystemMessage?this._parseEvent(s):t.isChannelMessage&&this.channels[t.channel]._processMidiMessageEvent(s),this._forwarders.forEach(r=>r.forward(t))}_parseEvent(e){const t=Object.assign({},e);t.type=t.message.type||"unknownmidimessage",t.type==="songselect"&&(t.song=e.data[1]+1,t.value=e.data[1],t.rawValue=t.value),this.emit(t.type,t)}async open(){try{await this._midiInput.open()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}getChannelModeByNumber(){v.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(e,t,s={}){if(v.validation&&typeof s=="function"){let r=t!=null?[].concat(t):void 0;t=s,s={channels:r}}if(d.CHANNEL_EVENTS.includes(e)){s.channels===void 0&&(s.channels=d.MIDI_CHANNEL_NUMBERS);let r=[];return E.sanitizeChannels(s.channels).forEach(i=>{r.push(this.channels[i].addListener(e,t,s))}),r}return super.addListener(e,t,s)}addOneTimeListener(e,t,s={}){return s.remaining=1,this.addListener(e,t,s)}on(e,t,s,r){return this.addListener(e,t,s,r)}hasListener(e,t,s={}){if(v.validation&&typeof s=="function"){let r=[].concat(t);t=s,s={channels:r}}return d.CHANNEL_EVENTS.includes(e)?(s.channels===void 0&&(s.channels=d.MIDI_CHANNEL_NUMBERS),E.sanitizeChannels(s.channels).every(r=>this.channels[r].hasListener(e,t))):super.hasListener(e,t)}removeListener(e,t,s={}){if(v.validation&&typeof s=="function"){let r=[].concat(t);t=s,s={channels:r}}if(s.channels===void 0&&(s.channels=d.MIDI_CHANNEL_NUMBERS),e==null)return E.sanitizeChannels(s.channels).forEach(r=>{this.channels[r]&&this.channels[r].removeListener()}),super.removeListener();d.CHANNEL_EVENTS.includes(e)?E.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].removeListener(e,t,s)}):super.removeListener(e,t,s)}addForwarder(e,t={}){let s;return s=e instanceof js?e:new js(e,t),this._forwarders.push(s),s}removeForwarder(e){this._forwarders=this._forwarders.filter(t=>t!==e)}hasForwarder(e){return this._forwarders.includes(e)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return v.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */const v=new class extends we{constructor(){super(),this.defaults={note:{attack:E.from7bitToFloat(64),release:E.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(n={},e=!1){if(E.isNode){try{window.navigator}catch{global.navigator=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)()}try{}catch{global.performance=await Object.getPrototypeOf(async function(){}).constructor(`
        let perf_hooks = await import("perf_hooks");
        return perf_hooks.performance;
        `)()}}if(this.validation=n.validation!==!1,this.validation&&(typeof n=="function"&&(n={callback:n,sysex:e}),e&&(n.sysex=!0)),this.enabled)return typeof n.callback=="function"&&n.callback(),Promise.resolve();const t={timestamp:this.time,target:this,type:"error",error:void 0},s={timestamp:this.time,target:this,type:"midiaccessgranted"},r={timestamp:this.time,target:this,type:"enabled"};try{typeof n.requestMIDIAccessFunction=="function"?this.interface=await n.requestMIDIAccessFunction({sysex:n.sysex,software:n.software}):this.interface=await navigator.requestMIDIAccess({sysex:n.sysex,software:n.software})}catch(i){return t.error=i,this.emit("error",t),typeof n.callback=="function"&&n.callback(i),Promise.reject(i)}this.emit("midiaccessgranted",s),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(i){return t.error=i,this.emit("error",t),typeof n.callback=="function"&&n.callback(i),Promise.reject(i)}return this.emit("enabled",r),typeof n.callback=="function"&&n.callback(),Promise.resolve(this)}async disable(){return this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface&&(this.interface.onstatechange=void 0),this.interface=null;let n={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",n),this.removeListener()})}getInputById(n,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!n)return}if(e.disconnected){for(let t=0;t<this._disconnectedInputs.length;t++)if(this._disconnectedInputs[t].id===n.toString())return this._disconnectedInputs[t]}else for(let t=0;t<this.inputs.length;t++)if(this.inputs[t].id===n.toString())return this.inputs[t]}getInputByName(n,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!n)return;n=n.toString()}if(e.disconnected){for(let t=0;t<this._disconnectedInputs.length;t++)if(~this._disconnectedInputs[t].name.indexOf(n))return this._disconnectedInputs[t]}else for(let t=0;t<this.inputs.length;t++)if(~this.inputs[t].name.indexOf(n))return this.inputs[t]}getOutputByName(n,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!n)return;n=n.toString()}if(e.disconnected){for(let t=0;t<this._disconnectedOutputs.length;t++)if(~this._disconnectedOutputs[t].name.indexOf(n))return this._disconnectedOutputs[t]}else for(let t=0;t<this.outputs.length;t++)if(~this.outputs[t].name.indexOf(n))return this.outputs[t]}getOutputById(n,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!n)return}if(e.disconnected){for(let t=0;t<this._disconnectedOutputs.length;t++)if(this._disconnectedOutputs[t].id===n.toString())return this._disconnectedOutputs[t]}else for(let t=0;t<this.outputs.length;t++)if(this.outputs[t].id===n.toString())return this.outputs[t]}noteNameToNumber(n){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),E.toNoteNumber(n,this.octaveOffset)}getOctave(n){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),n=parseInt(n)),!isNaN(n)&&n>=0&&n<=127&&E.getNoteDetails(E.offsetNumber(n,this.octaveOffset)).octave}sanitizeChannels(n){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),E.sanitizeChannels(n)}toMIDIChannels(n){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),E.sanitizeChannels(n)}guessNoteNumber(n){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),E.guessNoteNumber(n,this.octaveOffset)}getValidNoteArray(n,e={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),E.buildNoteArray(n,e)}convertToTimestamp(n){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),E.toTimestamp(n)}async _destroyInputsAndOutputs(){let n=[];return this.inputs.forEach(e=>n.push(e.destroy())),this.outputs.forEach(e=>n.push(e.destroy())),Promise.all(n).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(n){this._updateInputsAndOutputs();let e={timestamp:n.timeStamp,type:n.port.state,target:this};if(n.port.state==="connected"&&n.port.connection==="open"){n.port.type==="output"?e.port=this.getOutputById(n.port.id):n.port.type==="input"&&(e.port=this.getInputById(n.port.id)),this.emit(n.port.state,e);const t=Object.assign({},e);t.type="portschanged",this.emit(t.type,t)}else if(n.port.state==="disconnected"&&n.port.connection==="pending"){n.port.type==="input"?e.port=this.getInputById(n.port.id,{disconnected:!0}):n.port.type==="output"&&(e.port=this.getOutputById(n.port.id,{disconnected:!0})),this.emit(n.port.state,e);const t=Object.assign({},e);t.type="portschanged",this.emit(t.type,t)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let e=this._inputs.length-1;e>=0;e--){const t=this._inputs[e];Array.from(this.interface.inputs.values()).find(s=>s===t._midiInput)||(this._disconnectedInputs.push(t),this._inputs.splice(e,1))}let n=[];return this.interface.inputs.forEach(e=>{if(!this._inputs.find(t=>t._midiInput===e)){let t=this._disconnectedInputs.find(s=>s._midiInput===e);t||(t=new Fa(e)),this._inputs.push(t),n.push(t.open())}}),Promise.all(n)}async _updateOutputs(){if(!this.interface)return;for(let e=this._outputs.length-1;e>=0;e--){const t=this._outputs[e];Array.from(this.interface.outputs.values()).find(s=>s===t._midiOutput)||(this._disconnectedOutputs.push(t),this._outputs.splice(e,1))}let n=[];return this.interface.outputs.forEach(e=>{if(!this._outputs.find(t=>t._midiOutput===e)){let t=this._disconnectedOutputs.find(s=>s._midiOutput===e);t||(t=new Hn(e)),this._outputs.push(t),n.push(t.open())}}),Promise.all(n)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),E.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),E.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(n){if(this.validation&&(n=parseInt(n),isNaN(n)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=n}get outputs(){return this._outputs}get supported(){return typeof navigator!="undefined"&&navigator.requestMIDIAccess}get sysexEnabled(){return!(!this.interface||!this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.0.19"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),d.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.MIDI_SYSTEM_MESSAGES."),d.MIDI_SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.MIDI_CHANNEL_MODE_MESSAGES."),d.MIDI_CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been moved to Enumerations.MIDI_CONTROL_CHANGE_MESSAGES."),d.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.MIDI_REGISTERED_PARAMETERS."),this.MIDI_REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}};v.constructor=null;var Ot=(n,e)=>{const t=n.__vccOpts||n;for(const[s,r]of e)t[s]=r;return t};const ka={props:["note","velocity","active"],computed:{hexVelocity(){return isNaN(this.velocity)?"..":this.velocity.toString(16).toUpperCase()}}},Ha={class:"note"},Ua={class:"velocity"};function Ga(n,e,t,s,r,i){return ve(),Le("tr",{class:ne({active:t.active})},[k("td",Ha,vn(t.note||"..."),1),k("td",Ua,vn(i.hexVelocity),1)],2)}var Va=Ot(ka,[["render",Ga],["__scopeId","data-v-f3be4466"]]);const Ka={components:{TrackCell:Va},props:["cells","activeRow"]};function ja(n,e,t,s,r,i){const o=zt("TrackCell");return ve(),Le("table",null,[(ve(!0),Le(se,null,Ln(t.cells,(a,c)=>(ve(),Kr(o,zr(a,{active:c===t.activeRow}),null,16,["active"]))),256))])}var za=Ot(Ka,[["render",ja],["__scopeId","data-v-6c28f0ec"]]);const $a={props:["activeKeys"],emits:["noteOn"]};function qa(n,e,t,s,r,i){return ve(),Le(se,null,[k("button",{class:ne({active:t.activeKeys.has(0)}),onMousedown:e[0]||(e[0]=o=>n.$emit("noteOn",0))},null,34),k("button",{class:ne(["black",{active:t.activeKeys.has(1)}]),onMousedown:e[1]||(e[1]=o=>n.$emit("noteOn",1))},null,34),k("button",{class:ne({active:t.activeKeys.has(2)}),onMousedown:e[2]||(e[2]=o=>n.$emit("noteOn",2))},null,34),k("button",{class:ne(["black",{active:t.activeKeys.has(3)}]),onMousedown:e[3]||(e[3]=o=>n.$emit("noteOn",3))},null,34),k("button",{class:ne({active:t.activeKeys.has(4)}),onMousedown:e[4]||(e[4]=o=>n.$emit("noteOn",4))},null,34),k("button",{class:ne({active:t.activeKeys.has(5)}),onMousedown:e[5]||(e[5]=o=>n.$emit("noteOn",5))},null,34),k("button",{class:ne(["black",{active:t.activeKeys.has(6)}]),onMousedown:e[6]||(e[6]=o=>n.$emit("noteOn",6))},null,34),k("button",{class:ne({active:t.activeKeys.has(7)}),onMousedown:e[7]||(e[7]=o=>n.$emit("noteOn",7))},null,34),k("button",{class:ne(["black",{active:t.activeKeys.has(8)}]),onMousedown:e[8]||(e[8]=o=>n.$emit("noteOn",8))},null,34),k("button",{class:ne({active:t.activeKeys.has(9)}),onMousedown:e[9]||(e[9]=o=>n.$emit("noteOn",9))},null,34),k("button",{class:ne(["black",{active:t.activeKeys.has(10)}]),onMousedown:e[10]||(e[10]=o=>n.$emit("noteOn",10))},null,34),k("button",{class:ne({active:t.activeKeys.has(11)}),onMousedown:e[11]||(e[11]=o=>n.$emit("noteOn",11))},null,34)],64)}var Ya=Ot($a,[["render",qa],["__scopeId","data-v-e6bb8774"]]);const Wa={components:{DiatonicKeyboardFragment:Ya},props:["activeKeys"],emits:["noteOn"],computed:{lowerKeys(){const n=new Set;for(const e of this.activeKeys)e<12&&n.add(e);return n},upperKeys(){const n=new Set;for(const e of this.activeKeys)e>=12&&n.add(e-12);return n}},methods:{lowerNoteOn(n){this.$emit("noteOn",n)},upperNoteOn(n){this.$emit("noteOn",n+12)}}};function Ja(n,e,t,s,r,i){const o=zt("DiatonicKeyboardFragment");return ve(),Le(se,null,[Me(o,{activeKeys:i.lowerKeys,onNoteOn:i.lowerNoteOn},null,8,["activeKeys","onNoteOn"]),Me(o,{activeKeys:i.upperKeys,onNoteOn:i.upperNoteOn},null,8,["activeKeys","onNoteOn"])],64)}var Xa=Ot(Wa,[["render",Ja]]);function Wt(n,e){return(n%e+e)%e}const En=Symbol(),Jr=4,Qa=220*2**.25,ye="FCGDAEB",Za=ye.indexOf("C"),Ft=-4,el=[-1,0,0,1,1,2,2];function tl(n){const[e,t]=n,s=2*e-5*t;let r=3*t-e+Jr,i=s+Za;r+=el[Wt(i,ye.length)];const o=ye[Wt(i,ye.length)];let a="";for(;i<-ye.length;)a+="\u{1D12B}",i+=2*ye.length,r+=2*Ft;for(;i<0;)a+="\u266D",i+=ye.length,r+=Ft;for(;i>=2*ye.length;)a+="\u{1D12A}",i-=2*ye.length,r-=2*Ft;for(;i>=ye.length;)a+="\u266F",i-=ye.length,r-=Ft;return a===""&&(a="\u266E"),o+a+r.toString(16)}const be="KMOJLNP",nl=be.indexOf("J"),kt=-2,sl=[-1,-1,-1,0,0,0,0];function rl(n){const[e,t]=n,s=4*t-3*e;let r=e-t+Jr,i=s+nl;r+=sl[Wt(i,be.length)];const o=be[Wt(i,be.length)];let a="";for(;i<-be.length;)a+="\xA7",i+=2*be.length,r+=2*kt;for(;i<0;)a+="&",i+=be.length,r+=kt;for(;i>=2*be.length;)a+="\xA9",i-=2*be.length,r-=2*kt;for(;i>=be.length;)a+="@",i-=be.length,r-=kt;return a===""&&(a="\xB7"),o+a+r.toString(16)}let yn;const Un=[];function Fe(){return yn===void 0&&(yn=new AudioContext({latencyHint:"interactive"})),yn}function zs(){Fe().suspend()}function bn(){Fe().resume()}function Xr(){if(Un.length)return Un.pop();const n=Fe(),e=n.createOscillator();return e.start(n.currentTime),e}function il(n){const e=Fe();n.frequency.cancelScheduledValues(e.currentTime),n.detune.cancelScheduledValues(e.currentTime),n.disconnect(),Un.push(n)}function Qr(n,e){const t=Fe(),s=t.createConstantSource();s.start(t.currentTime),s.stop(n),s.addEventListener("ended",e);function r(o){s.stop(o)}function i(){s.removeEventListener("ended",e)}return[r,i]}function ol(n,e,t,s){const r=Fe(),i=Xr();i.type=e.waveform;const o=r.createGain();o.gain.setValueAtTime(0,r.currentTime),i.connect(o).connect(r.destination),n.length&&i.frequency.setValueAtTime(n[0].frequency,r.currentTime);let a=r.currentTime+s;n.forEach(g=>{i.frequency.setTargetAtTime(g.frequency,a,e.frequencyGlide),o.gain.setTargetAtTime(g.velocity*.25,a,e.amplitudeGlide),a+=t}),o.gain.setTargetAtTime(0,a,e.amplitudeGlide);const[c,h]=Qr(a+e.amplitudeGlide*4,()=>{il(i),o.gain.setValueAtTime(0,r.currentTime),o.disconnect()});return c}class al{constructor(e=.009,t=.005){this.frequencyGlide=e,this.amplitudeGlide=t;const s=Fe();this.oscillator=Xr(),this.oscillator.type="triangle",this.envelope=s.createGain(),this.envelope.gain.setValueAtTime(0,s.currentTime),this.oscillator.connect(this.envelope).connect(s.destination),this.stack=[]}noteOn(e,t){const s=Fe(),r=s.currentTime;this.envelope.gain.cancelScheduledValues(r),this.envelope.gain.setTargetAtTime(.5*t,r,this.amplitudeGlide),this.stack.length?this.oscillator.frequency.setTargetAtTime(e,r,this.frequencyGlide):this.oscillator.frequency.setValueAtTime(e,r);const i=Symbol(),o={frequency:e,velocity:t,id:i};this.stack.push(o);function a(){const c=s.currentTime;if(this.stack.length||(console.log("Warning: Note off with an empty stack"),this.envelope.gain.setTargetAtTime(0,c,this.amplitudeGlide)),this.stack[this.stack.length-1].id===i){if(this.stack.pop(),!this.stack.length){this.envelope.gain.setTargetAtTime(0,c,this.amplitudeGlide);return}const h=this.stack[this.stack.length-1];this.oscillator.frequency.setTargetAtTime(h.frequency,c,this.frequencyGlide),this.envelope.gain.setTargetAtTime(.5*h.velocity,c,this.amplitudeGlide)}else this.stack.splice(this.stack.indexOf(o),1)}return a.bind(this)}}const ll=35;function $s(n){const e=n%12,t=Math.floor(n/12);return[0,2,4,5,7,9,11].includes(e)?{number:Math.floor((e+1)/2)+7*t,sharpOf:null,flatOf:null}:[1,3].includes(e)?{number:null,sharpOf:(e-1)/2+7*t,flatOf:(e+1)/2+7*t}:{number:null,sharpOf:e/2+7*t,flatOf:(e+2)/2+7*t}}const cl={components:{Track:za,DiatonicKeyboard:Xa},data(){return{instrument:new al,midiNoteOffCallbacks:new Map,midiInputs:[],midiInput:null,activeMidiKeys:new Set,onScreenNoteOffCallback:null,cancelCallbacks:[],mosPattern:"LsLsLsL",l:5,s:2,equave:2,baseFrequency:Qa,beatsPerMinute:120,audioDelay:.05,playing:!1,activeRow:null,cancelRowCallback:null,tracks:[{instrument:{monophonic:!0,waveform:"sine",frequencyGlide:.01,amplitudeGlide:.02},cells:[{monzo:[0,0],velocity:255},{monzo:[1,0],velocity:255},{monzo:[1,1],velocity:255},{monzo:[2,1],velocity:255},{monzo:[2,2],velocity:255},{monzo:[3,2],velocity:255},{monzo:[3,3],velocity:255},{monzo:[4,3],velocity:255}]},{instrument:{monophonic:!0,waveform:"triangle",frequencyGlide:.01,amplitudeGlide:.02},cells:[null,{monzo:[-4,-3],velocity:128},null,null,En,null,null,null]}]}},computed:{countL(){let n=0;return this.mosPattern.split("").forEach(e=>e==="L"?n++:null),n},countS(){let n=0;return this.mosPattern.split("").forEach(e=>e==="s"?n++:null),n},mos(){return this.countL+"L"+this.countS+"s"},divisions(){return this.countL*this.l+this.countS*this.s},notation(){if(this.mos==="5L2s")return tl;if(this.mos==="4L3s")return rl},cellsWithNotes(){const n=[];return this.tracks.forEach(e=>{n.push(e.cells.map(t=>t===null?{note:"",velocity:NaN}:t===En?{note:"\u25AD",velocity:NaN}:{note:this.notation(t.monzo),velocity:t.velocity}))}),n},beatDuration(){return 60/this.beatsPerMinute},activeMiniKeys(){const n=new Set;for(const e of this.activeMidiKeys)n.add((e+12)%24);return n}},methods:{cellsToFrequencies(n){let e=null,t=0;const s=n.map(r=>{if(r===En)t=0;else if(r!==null){const i=this.l*r.monzo[0]+this.s*r.monzo[1];e=this.baseFrequency*this.equave**(i/this.divisions),t=r.velocity/255}return{frequency:e,velocity:t}});e=this.baseFrequency;for(let r=s.length-1;r>=0;r--)s[r].frequency!==null&&(e=s[r].frequency),s[r].frequency=e;return s},cancelPlay(){for(this.cancelRowCallback&&(this.cancelRowCallback(),this.cancelRowCallback=null);this.cancelCallbacks.length;)this.cancelCallbacks.pop()();this.playing=!1,this.activeRow=null},play(){this.cancelPlay(),zs(),this.tracks.forEach(s=>{const r=this.cellsToFrequencies(s.cells);this.cancelCallbacks.push(ol(r,s.instrument,this.beatDuration,this.audioDelay))}),this.playing=!0;const e=Fe().currentTime;function t(){if(!this.playing)return;this.activeRow++;const[s,r]=Qr(e+this.beatDuration*(this.activeRow+1),t.bind(this));this.cancelRowCallback=r}this.activeRow=-1,t.bind(this)(),bn()},stop(){this.cancelPlay(),window.setTimeout(zs,100)},selectMidiInput(n){const e=n.target.value;this.midiInput=v.getInputById(e)},scaleStepToFrequency(n){const e=Math.floor(n/this.mosPattern.length);n-=e*this.mosPattern.length;let t=0;for(let s=0;s<n;++s)this.mosPattern[s]=="L"?t+=this.l:t+=this.s;return this.baseFrequency*this.equave**e*this.equave**(t/this.divisions)},velocityCurve(n){return Math.sqrt(n)*.9+.1},arm(){if(this.midiInput===null)return;bn();function n(t){this.activeMidiKeys.add(t.note.number);const s=$s(t.note.number);if(s.number===null)return;const r=this.scaleStepToFrequency(s.number-ll),i=this.instrument.noteOn(r,this.velocityCurve(t.note.attack));this.midiNoteOffCallbacks.set(t.note.number,i)}this.midiInput.addListener("noteon",n.bind(this));function e(t){this.activeMidiKeys.delete(t.note.number),this.midiNoteOffCallbacks.has(t.note.number)&&(this.midiNoteOffCallbacks.get(t.note.number)(),this.midiNoteOffCallbacks.delete(t.note.number))}this.midiInput.addListener("noteoff",e.bind(this))},onScreenNoteOn(n){bn();const e=$s(n);if(e.number===null)return;const t=this.scaleStepToFrequency(e.number);this.onScreenNoteOffCallback=this.instrument.noteOn(t,.9)}},async mounted(){function n(){this.onScreenNoteOffCallback!==null&&(this.onScreenNoteOffCallback(),this.onScreenNoteOffCallback=null)}window.addEventListener("mouseup",n.bind(this)),await v.enable(),this.midiInputs=v.inputs}},ul=k("div",{class:"break"},null,-1),fl=k("div",{class:"break"},null,-1),hl=k("h1",null,"MIDI Input",-1),dl=k("option",{disabled:"disabled",selected:"selected",value:""},"--Select device--",-1),pl=["value"],ml=k("div",{class:"break"},null,-1),gl=k("div",{class:"break"},null,-1);function _l(n,e,t,s,r,i){const o=zt("Track"),a=zt("DiatonicKeyboard");return ve(),Le(se,null,[k("div",null,[k("button",{onClick:e[0]||(e[0]=(...c)=>i.play&&i.play(...c))},"play"),k("button",{onClick:e[1]||(e[1]=(...c)=>i.stop&&i.stop(...c))},"stop")]),ul,k("div",null,[(ve(!0),Le(se,null,Ln(i.cellsWithNotes,c=>(ve(),Kr(o,{cells:c,activeRow:r.activeRow},null,8,["cells","activeRow"]))),256))]),fl,k("div",null,[hl,k("select",{onChange:e[2]||(e[2]=(...c)=>i.selectMidiInput&&i.selectMidiInput(...c))},[dl,(ve(!0),Le(se,null,Ln(r.midiInputs,c=>(ve(),Le("option",{value:c.id},vn((c.manufacturer||"(Generic)")+": "+c.name),9,pl))),256))],32),ml,k("button",{onClick:e[3]||(e[3]=(...c)=>i.arm&&i.arm(...c))},"rec")]),gl,k("div",null,[Me(a,{onNoteOn:i.onScreenNoteOn,activeKeys:i.activeMiniKeys},null,8,["onNoteOn","activeKeys"])])],64)}var El=Ot(cl,[["render",_l]]);const Zr=Oa(El);Zr.use(Ba());Zr.mount("#app");
